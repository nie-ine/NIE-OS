

  <mat-drawer-container  align="end" style="height:100vh; margin-top: 30px;">
    <mat-drawer #drawer mode="side" align="end">
      <div>
        <button mat-button (click)="addAnotherApp(appTypes[ 'imageViewer' ].model, true)">Add image Viewer</button><br>
        <button mat-button (click)="addAnotherApp(appTypes[ 'searchViewer' ].model, true)">Add search Viewer</button><br>
        <button mat-button (click)="addAnotherApp(appTypes[ 'grapesJSViewer' ].model, true)">Add grapesJS Viewer</button><br>
        <button mat-button (click)="addAnotherApp(appTypes[ 'textViewer' ].model, true)">Add text Viewer</button><br>
      </div>
      <div style="bottom: 0; position:absolute; right: 0">
        <button mat-button (click)="saveView()">Save View</button><br>
        <button mat-button (click)="deleteView()">Delete View</button><br>
      </div>
    </mat-drawer>

    <div >
      <button type="button" mat-button (click)="drawer.toggle()" matTooltip='{{ createTooltip() }}'>
        NIE-INE Apps
      </button>
    </div>

    <!-- Image Viewer -->
    <div *ngFor="let imageViewer of appTypes[ 'imageViewer' ].model; let i = index;" >
      <popup #imageViewer
             [hash]="appTypes[ 'imageViewer' ].model[i].hash"
             [title]="'Image Viewer ' + i"
             [type]="appTypes[ 'imageViewer' ].type"
             [firstPopupX]="appTypes[ 'imageViewer' ].model[i].x"
             [firstPopupY]="appTypes[ 'imageViewer' ].model[i].y"
             (sendAppCoordinatesBack)="updateAppCoordinates($event)">
        <nie-image-frame style="height: 100%;"
                         [image]="image"
                         width="500"
                         height="500">
        </nie-image-frame>
      </popup>
      <button mat-button [matMenuTriggerFor]="menu" style="vertical-align: bottom;" ><mat-icon>settings</mat-icon></button>
      <mat-menu #menu="matMenu">
        <button mat-menu-item (click)=" closeApp( appTypes[ 'imageViewer' ].model, i ) ">Close this app</button>
        <button mat-menu-item>Choose Image</button>
      </mat-menu>
      <button mat-button (click)="imageViewer.appear()" >Image Viewer {{ i }}</button><br>
    </div>

    <!-- Search -->
    <div *ngFor="let search of appTypes[ 'searchViewer' ].model; let i = index;" >
      <popup #searchViewer
             [hash]="appTypes[ 'searchViewer' ].model[i].hash"
             [title]="'Search ' + i"
             [type]="appTypes[ 'searchViewer' ].type"
             [firstPopupX]="appTypes[ 'searchViewer' ].model[i].x"
             [firstPopupY]="appTypes[ 'searchViewer' ].model[i].y"
             (sendAppCoordinatesBack)="updateAppCoordinates($event)">
        <nie-search
        style="height: 100%;">

        </nie-search>
      </popup>
      <button mat-button [matMenuTriggerFor]="menu" style="vertical-align: bottom;" ><mat-icon>settings</mat-icon></button>
      <mat-menu #menu="matMenu">
        <button mat-menu-item (click)=" closeApp( appTypes[ 'searchViewer' ].model, i ) ">Close this app</button>
      </mat-menu>
      <button mat-button (click)="searchViewer.appear()" >Search Viewer {{ i }}</button><br>
    </div>

    <!-- GrapesJS -->
    <div *ngFor="let grapesJS of appTypes[ 'grapesJSViewer' ].model; let i = index;" >
      <popup #grapesJSViewer
             [hash]="appTypes[ 'grapesJSViewer' ].model[i].hash"
             [title]="'GrapesJS ' + i"
             [type]="appTypes[ 'grapesJSViewer' ].type"
             [firstPopupX]="appTypes[ 'grapesJSViewer' ].model[i].x"
             [firstPopupY]="appTypes[ 'grapesJSViewer' ].model[i].y"
             (sendAppCoordinatesBack)="updateAppCoordinates($event)">
        <div id="grapesJSViewer">Please drag this window to desired size and open other app. <br>
          ( Click for example on image view, this will cause the instantiation of  grapesjs as well. )<br>
        This is necessary because of a current bug.</div>
      </popup>
      <button mat-button [matMenuTriggerFor]="menu" style="vertical-align: bottom;" ><mat-icon>settings</mat-icon></button>
      <mat-menu #menu="matMenu">
        <button mat-menu-item (click)="closeApp( appTypes[ 'grapesJSViewer' ].model, i )">Close this app</button>
      </mat-menu>
      <button mat-button (click)="grapesJSViewer.appear()" >GrapesJS Viewer {{ i }}</button><br>
    </div>

    <!-- TextViewer -->
    <div *ngFor="let textViewer of appTypes[ 'textViewer' ].model; let i = index;" >
      <popup #textViewer
             [hash]="appTypes[ 'textViewer' ].model[i].hash"
             [title]="'Text Viewer ' + i"
             [type]="appTypes[ 'textViewer' ].type"
             [firstPopupX]="appTypes[ 'textViewer' ].model[i].x"
             [firstPopupY]="appTypes[ 'textViewer' ].model[i].y"
             (sendAppCoordinatesBack)="updateAppCoordinates($event)">
        <div style="width: 500px; max-width: 500px;">
          <app-text-view class="draggable">
          </app-text-view>
        </div>
      </popup>
      <button mat-button [matMenuTriggerFor]="menu" style="vertical-align: bottom;" ><mat-icon>settings</mat-icon></button>
      <mat-menu #menu="matMenu">
        <button mat-menu-item (click)=" closeApp( appTypes[ 'textViewer' ].model, i ) ">Close this app</button>
        <button mat-menu-item>Choose Text</button>
      </mat-menu>
      <button mat-button (click)="textViewer.appear()" >Text Viewer {{ i }}</button><br>
    </div>

  </mat-drawer-container>


