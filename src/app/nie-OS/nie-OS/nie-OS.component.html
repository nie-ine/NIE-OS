
  <!-- Menu to open Apps-->
  <mat-drawer-container  style="height:100vh; margin-top: 30px;">
    <mat-drawer #drawer mode="side" >
      <div>
        <button mat-button (click)="addAnotherApp(appTypes[ 'imageViewer' ].model, true)">Add image Viewer</button><br>
        <button mat-button (click)="addAnotherApp(appTypes[ 'searchViewer' ].model, true)">Add search Viewer</button><br>
        <button mat-button (click)="addAnotherApp(appTypes[ 'grapesJSViewer' ].model, true)">Add grapesJS Viewer</button><br>
        <button mat-button (click)="addAnotherApp(appTypes[ 'textViewer' ].model, true)">Add text Viewer</button><br>
        <button mat-button (click)="addAnotherApp(appTypes[ 'synopsisViewer' ].model, true)">Add Synopsis Viewer</button><br>
        <button mat-button (click)="addAnotherApp(appTypes[ 'createResourceForm' ].model, true)">Add Resource Creation Form</button><br>
        <button mat-button (click)="addAnotherApp(appTypes[ 'textlistViewers' ].model, true)">Add Textlist - Viewer</button><br>
      </div>
      <div style="bottom: 0; position:absolute; right: 0">
        <button mat-button (click)="addAnotherApp(appTypes[ 'dataChooser' ].model, true)">Add Data Chooser</button><br>
        <button mat-button (click)="saveView()">Save View</button><br>
        <button mat-button (click)="deleteView()">Delete View</button><br>
      </div>
    </mat-drawer>

    <div >
      <button type="button" mat-button (click)="drawer.toggle()" matTooltip='{{ createTooltip() }}'>
        NIE-INE Apps
      </button>
    </div>

    <!-- Image Viewer -->
    <div *ngFor="let imageViewer of appTypes[ 'imageViewer' ].model; let i = index;" >
      <popup #imageViewer
             [hash]="appTypes[ 'imageViewer' ].model[i].hash"
             [title]="'Image Viewer ' + i"
             [type]="appTypes[ 'imageViewer' ].type"
             [firstPopupX]="appTypes[ 'imageViewer' ].model[i].x"
             [firstPopupY]="appTypes[ 'imageViewer' ].model[i].y"
             (sendAppCoordinatesBack)="updateAppCoordinates($event)">
        <nie-image-frame style="height: 100%;"
                         [image]="image"
                         width="500"
                         height="500">
        </nie-image-frame>
      </popup>
      <button mat-button [matMenuTriggerFor]="menu" style="vertical-align: bottom;" ><mat-icon>settings</mat-icon></button>
      <mat-menu #menu="matMenu">
        <button mat-menu-item (click)=" closeApp( appTypes[ 'imageViewer' ].model, i ) ">Close this app</button>
        <button mat-menu-item>Choose Image</button>
      </mat-menu>
      <button mat-button (click)="imageViewer.appear()" >Image Viewer {{ i }}</button><br>
    </div>

    <!-- Search -->
    <div *ngFor="let search of appTypes[ 'searchViewer' ].model; let i = index;" >
      <popup #searchViewer
             [hash]="appTypes[ 'searchViewer' ].model[i].hash"
             [title]="'Search ' + i"
             [type]="appTypes[ 'searchViewer' ].type"
             [firstPopupX]="appTypes[ 'searchViewer' ].model[i].x"
             [firstPopupY]="appTypes[ 'searchViewer' ].model[i].y"
             (sendAppCoordinatesBack)="updateAppCoordinates($event)">
        <nie-search
        style="height: 100%;">

        </nie-search>
      </popup>
      <button mat-button [matMenuTriggerFor]="menu" style="vertical-align: bottom;" ><mat-icon>settings</mat-icon></button>
      <mat-menu #menu="matMenu">
        <button mat-menu-item (click)=" closeApp( appTypes[ 'searchViewer' ].model, i ) ">Close this app</button>
      </mat-menu>
      <button mat-button (click)="searchViewer.appear()" >Search Viewer {{ i }}</button><br>
    </div>

    <!-- GrapesJS -->
    <div *ngFor="let grapesJS of appTypes[ 'grapesJSViewer' ].model; let i = index;" >
      <popup #grapesJSViewer
             [hash]="appTypes[ 'grapesJSViewer' ].model[i].hash"
             [title]="'GrapesJS ' + i"
             [type]="appTypes[ 'grapesJSViewer' ].type"
             [firstPopupX]="appTypes[ 'grapesJSViewer' ].model[i].x"
             [firstPopupY]="appTypes[ 'grapesJSViewer' ].model[i].y"
             (sendAppCoordinatesBack)="updateAppCoordinates($event)">
        <div id="grapesJSViewer">Please drag this window to desired size and open other app. <br>
          ( Click for example on image view, this will cause the instantiation of  grapesjs as well. )<br>
        This is necessary because of a current bug.</div>
      </popup>
      <button mat-button [matMenuTriggerFor]="menu" style="vertical-align: bottom;" ><mat-icon>settings</mat-icon></button>
      <mat-menu #menu="matMenu">
        <button mat-menu-item (click)="closeApp( appTypes[ 'grapesJSViewer' ].model, i )">Close this app</button>
      </mat-menu>
      <button mat-button (click)="grapesJSViewer.appear()" >GrapesJS Viewer {{ i }}</button><br>
    </div>

    <!-- TextViewer -->
    <div *ngFor="let textViewer of appTypes[ 'textViewer' ].model; let i = index;" >
      <popup #textViewer
             [hash]="appTypes[ 'textViewer' ].model[i].hash"
             [title]="'Text Viewer ' + i"
             [type]="appTypes[ 'textViewer' ].type"
             [firstPopupX]="appTypes[ 'textViewer' ].model[i].x"
             [firstPopupY]="appTypes[ 'textViewer' ].model[i].y"
             (sendAppCoordinatesBack)="updateAppCoordinates($event)">
        <div style="max-width: 500px;">
          <app-text-view class="draggable">
          </app-text-view>
        </div>
      </popup>
      <button mat-button [matMenuTriggerFor]="menu" style="vertical-align: bottom;" ><mat-icon>settings</mat-icon></button>
      <mat-menu #menu="matMenu">
        <button mat-menu-item (click)=" closeApp( appTypes[ 'textViewer' ].model, i ) ">Close this app</button>
        <button mat-menu-item>Choose Text</button>
      </mat-menu>
      <button mat-button (click)="textViewer.appear()" >Text Viewer {{ i }}</button><br>
    </div>

    <!-- Synopsis -->
    <div *ngFor="let synopsisViewer of appTypes[ 'synopsisViewer' ].model; let i = index;" >
      <popup #synopsisViewer
             [hash]="appTypes[ 'synopsisViewer' ].model[i].hash"
             [title]="'Synopsis Viewer ' + i"
             [type]="appTypes[ 'synopsisViewer' ].type"
             [firstPopupX]="appTypes[ 'synopsisViewer' ].model[i].x"
             [firstPopupY]="appTypes[ 'synopsisViewer' ].model[i].y"
             (sendAppCoordinatesBack)="updateAppCoordinates($event)">
        <div style="width: 900px; height: 400px;" >
          <app-synopsis style="position: sticky;">

          </app-synopsis>
        </div>
      </popup>
      <button mat-button [matMenuTriggerFor]="menu" style="vertical-align: bottom;" ><mat-icon>settings</mat-icon></button>
      <mat-menu #menu="matMenu">
        <button mat-menu-item (click)=" closeApp( appTypes[ 'synopsisViewer' ].model, i ) ">Close this app</button>
        <button mat-menu-item>Choose Text</button>
      </mat-menu>
      <button mat-button (click)="synopsisViewer.appear()" >Synopsis Viewer {{ i }}</button><br>
    </div>

    <!-- Resource Creation Form -->
    <div *ngFor="let createResourceForm of appTypes[ 'createResourceForm' ].model; let i = index;" >
      <popup #createResourceForm
             [hash]="appTypes[ 'createResourceForm' ].model[i].hash"
             [title]="'Resource Creation ' + i"
             [type]="appTypes[ 'createResourceForm' ].type"
             [firstPopupX]="appTypes[ 'createResourceForm' ].model[i].x"
             [firstPopupY]="appTypes[ 'createResourceForm' ].model[i].y"
             (sendAppCoordinatesBack)="updateAppCoordinates($event)">
        <div style="width: 900px; height: 400px;" >
          <app-create-resource style="position: sticky;"
                               [projectIRI]="projectIRI"
                               (resourceIRI)="closeApp( appTypes[ 'createResourceForm' ].model, i )">
          </app-create-resource>
        </div>
      </popup>
      <button mat-button [matMenuTriggerFor]="menu" style="vertical-align: bottom;" ><mat-icon>settings</mat-icon></button>
      <mat-menu #menu="matMenu">
        <button mat-menu-item (click)=" closeApp( appTypes[ 'createResourceForm' ].model, i ) ">Close this app</button>
      </mat-menu>
      <button mat-button (click)="createResourceForm.appear()" >Resource creation form {{ i }}</button><br>
    </div>

    <!-- textlistViewers -->
    <div *ngFor="let createResourceForm of appTypes[ 'textlistViewers' ].model; let i = index;" >
      <popup #textlistViewers
             [hash]="appTypes[ 'textlistViewers' ].model[i].hash"
             [title]="'Textlist - Viewer ' + i"
             [type]="appTypes[ 'textlistViewers' ].type"
             [firstPopupX]="appTypes[ 'textlistViewers' ].model[i].x"
             [firstPopupY]="appTypes[ 'textlistViewers' ].model[i].y"
             (sendAppCoordinatesBack)="updateAppCoordinates($event)">
        <div style="width: 300px; height: 200px;" >
          <app-textlist-viewer style="position: sticky;"
                               (resourceIRI)="closeApp( appTypes[ 'textlistViewers' ].model, i )">
          </app-textlist-viewer>
        </div>
      </popup>
      <button mat-button [matMenuTriggerFor]="menu" style="vertical-align: bottom;" ><mat-icon>settings</mat-icon></button>
      <mat-menu #menu="matMenu">
        <button mat-menu-item (click)=" closeApp( appTypes[ 'textlistViewers' ].model, i ) ">Close this app</button>
      </mat-menu>
      <button mat-button (click)="textlistViewers.appear()" >Textlist Viewer {{ i }}</button><br>
    </div>

    <!-- Data Chooser -->
    <div *ngFor="let dataChooser of appTypes[ 'dataChooser' ].model; let i = index;" >
      <popup #dataChooser
             [hash]="appTypes[ 'dataChooser' ].model[i].hash"
             [title]="'Data Chooser ' + i"
             [type]="appTypes[ 'dataChooser' ].type"
             [firstPopupX]="appTypes[ 'dataChooser' ].model[i].x"
             [firstPopupY]="appTypes[ 'dataChooser' ].model[i].y"
             (sendAppCoordinatesBack)="updateAppCoordinates($event)">
        <div style="width: 600px; height: 50px;" >
          <app-data-chooser
            [viewModel] = "appTypes"  >
          </app-data-chooser>
        </div>
      </popup>
      <button mat-button [matMenuTriggerFor]="menu" style="vertical-align: bottom;" ><mat-icon>settings</mat-icon></button>
      <mat-menu #menu="matMenu">
        <button mat-menu-item (click)=" closeApp( appTypes[ 'dataChooser' ].model, i ) ">Close this app</button>
      </mat-menu>
      <button mat-button (click)="dataChooser.appear()" >Data Chooser {{ i }}</button><br>
    </div>


  </mat-drawer-container>
