

  <mat-drawer-container  align="end" style="height:100vh; margin-top: 30px;">
    <mat-drawer #drawer mode="side" align="end">
      <div>
        <button mat-button (click)="addAnotherApp(imageViewerModel, true)">Add image Viewer</button><br>
        <button mat-button (click)="addAnotherApp(searchModel, true)">Add search Viewer</button><br>
        <button mat-button (click)="addAnotherApp(grapesJSModel, true)">Add grapesJS Viewer</button><br>
        <button mat-button (click)="addAnotherApp(textViewerModel, true)">Add text Viewer</button><br>
      </div>
      <div style="bottom: 0; position:absolute; right: 0">
        <button mat-button (click)="saveView()">Save View</button><br>
        <button mat-button (click)="deleteView()">Delete View</button><br>
      </div>
    </mat-drawer>

    <div >
      <button type="button" mat-button (click)="drawer.toggle()" matTooltip='{{ createTooltip() }}'>
        NIE-INE Apps
      </button>
    </div>

    <!-- Image Viewer -->
    <div *ngFor="let imageViewer of imageViewerModel; let i = index;" >
      <popup #imageViewer
             [hash]=imageViewerModel[i].hash
             [title]="'Image Viewer ' + i"
             [type]="appTypes[ 'imageViewer' ]"
             [firstPopupX]=imageViewerModel[i].x
             [firstPopupY]=imageViewerModel[i].y
             (sendAppCoordinatesBack)="updateAppCoordinates($event)">
        <nie-image-frame style="height: 100%;"
                         [image]="image"
                         width="500"
                         height="500">
        </nie-image-frame>
      </popup>
      <button mat-button [matMenuTriggerFor]="menu" style="vertical-align: bottom;" ><mat-icon>settings</mat-icon></button>
      <mat-menu #menu="matMenu">
        <button mat-menu-item (click)=" closeApp( imageViewerModel, i ) ">Close this app</button>
        <button mat-menu-item>Choose Image</button>
      </mat-menu>
      <button mat-button (click)="imageViewer.appear()" >Image Viewer {{ i }}</button><br>
    </div>

    <!-- Search -->
    <div *ngFor="let search of searchModel; let i = index;" >
      <popup #searchViewer
             [hash]=searchModel[i].hash
             [title]="'Search ' + i"
             [type]="appTypes[ 'searchViewer' ]"
             [firstPopupX]=searchModel[i].x
             [firstPopupY]=searchModel[i].y
             (sendAppCoordinatesBack)="updateAppCoordinates($event)">
        <nie-search
        style="height: 100%;">

        </nie-search>
      </popup>
      <button mat-button [matMenuTriggerFor]="menu" style="vertical-align: bottom;" ><mat-icon>settings</mat-icon></button>
      <mat-menu #menu="matMenu">
        <button mat-menu-item (click)=" closeApp( searchModel, i ) ">Close this app</button>
      </mat-menu>
      <button mat-button (click)="searchViewer.appear()" >Search Viewer {{ searchModel[i] }}</button><br>
    </div>

    <!-- GrapesJS -->
    <div *ngFor="let grapesJS of grapesJSModel; let i = index;" >
      <popup #grapesJSViewer
             [hash]=grapesJSModel[i].hash
             [title]="'GrapesJS ' + i"
             [type]="appTypes[ 'grapesJSViewers' ]"
             [firstPopupX]=grapesJSModel[i].x
             [firstPopupY]=grapesJSModel[i].y>
        <div id="grapesJSViewer">Please drag this window to desired size and open other app. <br>
          ( Click for example on image view, this will cause the instantiation of  grapesjs as well. )<br>
        This is necessary because of a current bug.</div>
      </popup>
      <button mat-button [matMenuTriggerFor]="menu" style="vertical-align: bottom;" ><mat-icon>settings</mat-icon></button>
      <mat-menu #menu="matMenu">
        <button mat-menu-item (click)="closeApp( grapesJSModel, i )">Close this app</button>
      </mat-menu>
      <button mat-button (click)="grapesJSViewer.appear()" >GrapesJS Viewer {{ grapesJSModel[i] }}</button><br>
    </div>

    <!-- TextViewer -->
    <div *ngFor="let textViewer of textViewerModel; let i = index;" >
      <popup #textViewer
             [hash]=textViewerModel[i].hash
             [title]="'Text Viewer ' + i"
             [type]="appTypes[ 'textViewers' ]"
             [firstPopupX]=textViewerModel[i].x
             [firstPopupY]=textViewerModel[i].y>
        <div style="width: 500px; max-width: 500px;">
          <app-text-view class="draggable">
          </app-text-view>
        </div>
      </popup>
      <button mat-button [matMenuTriggerFor]="menu" style="vertical-align: bottom;" ><mat-icon>settings</mat-icon></button>
      <mat-menu #menu="matMenu">
        <button mat-menu-item (click)=" closeApp( textViewerModel, i ) ">Close this app</button>
        <button mat-menu-item>Choose Text</button>
      </mat-menu>
      <button mat-button (click)="textViewer.appear()" >Text Viewer {{ textViewerModel[i] }}</button><br>
    </div>

  </mat-drawer-container>


