<app-load-variables
  (sendPageBack)="receivePage( $event )"
  (sendOpenAppsInThisPageBack)="receiveOpenAppsInThisPage( $event )"
  [reload]="reloadVariables">

</app-load-variables>

<app-data-assignment
  [index]="index"
  [openAppsInThisPage]="openAppsInThisPage"
  [appInputQueryMapping]="page.appInputQueryMapping"
  [response]="response"
  [queryId] = "queryId"
  [depth]="depth"
  [updateLinkedApps]="updateLinkedApps"
  [indexAppMapping]="indexAppMapping"
  (sendAppTypesBackToNIEOS)="receiveOpenAppsInThisPage( $event )">

</app-data-assignment>

<ngx-spinner
  bdColor = "rgba(51, 51, 51, 0.8)"
  size = "large"
  color = "#fff"
  type = "cube-transition"
></ngx-spinner>

  <!-- Menu to open Apps-->
  <mat-drawer-container  style="height:100vh; margin-top: 30px;" >
    <mat-drawer #drawer mode="side" [opened]="true">

      <div *ngIf="!pageAsDemo">
        <h4 style="align-content: center" i18n="@@yourPageTitle">Your Page</h4>
        <button mat-button (click)="updatePage()" i18n="@@savePageButton">Save Page</button>
        <button mat-button (click)="expandPanels()" i18n="@@toggleDescriptionButton"> Un/fold description</button><br>
        <button mat-button (click)="openDataManagement()" i18n="@@pageDataManagementLink">Page Data Management</button><br>
        <h4 style="align-content: center">GrapesJS</h4>
        <button mat-button (click)="activateGrapesJS()" i18n="@@addGrapeJsButton">Add GrapesJS</button>
        <button mat-button (click)="deactivateGrapesJS()" i18n="@@removeGrapeJsButton">Remove GrapesJS</button><br>
        <button mat-button (click)="deleteGrapesJSData()" i18n="@@deleteGrapeJsDataButton">Delete GrapesJS Data</button>
        <button mat-button (click)="addBlock()" i18n="@@addBlockButton">Add Block</button>
      </div>

      <div *ngIf="pageAsDemo">
        <h4 style="align-content: center" i18n="@@demoPageTitle">Demo - Page</h4>
        <ng-container i18n="@@registerForFullPageFunctionalityMessage">
          You can not save anything you do on this <br> demo - page. If you would like to save <br> pages and pageSets, please register
        </ng-container>
        <a href="/register" i18n="@@hereLinkLabel">here</a>.
      </div>

      <!-- Data Chooser -->
      <h4 style="align-content: center" *ngIf="openAppsInThisPage[ 'dataChooser' ].model.length > 0" i18n="@@QueriesLabel">Queries</h4>
      <div *ngFor="let dataChooser of openAppsInThisPage[ 'dataChooser' ].model; let i = index;" >
        <button
          *ngIf="openAppsInThisPage[ 'dataChooser' ].model[i].title.search( 'Depth: ' ) === -1"
          (click)="openQueryInformationDialog( openAppsInThisPage[ 'dataChooser' ].model[i].queryId, openAppsInThisPage[ 'dataChooser' ].model[i].title )"
          mat-button>
          {{ openAppsInThisPage[ 'dataChooser' ].model[i].title }}
        </button>
        <div style="width: 300px; height: 50px;" >
          <app-data-chooser
            [appInputQueryMapping]=" page.appInputQueryMapping"
            [response]="openAppsInThisPage[ 'dataChooser' ].model[i].response"
            [queryId] = "openAppsInThisPage[ 'dataChooser' ].model[i].queryId"
            [openAppsInThisPage] = "openAppsInThisPage"
            [dataChooserEntries]="openAppsInThisPage[ 'dataChooser' ].model[i].dataChooserEntries"
            [description]=" 'Depth: ' + openAppsInThisPage[ 'dataChooser' ].model[i].depth "
            [depth]="openAppsInThisPage[ 'dataChooser' ].model[i].depth"
            (sendIndexBack)="updateMainResourceIndex( $event )">
          </app-data-chooser>
        </div>
      </div>



      <!-- Texts -->
      <details style="margin-top: 35px; width: 300px;">
        <summary style="cursor: pointer"><h4 style="align-content: center; display: inline;" i18n="@@textAppsLabel">Text</h4><h4 style="align-content: center; display: inline; color: #4dc71f" i18n="@@appsLabel">&nbsp;Apps</h4></summary>

        <mat-expansion-panel style="width: 300px; margin-top: 10px;" [expanded]="panelsOpen" >
          <mat-expansion-panel-header >
            <mat-panel-title i18n="@@textViewerAppLabel">
              Text Viewer
            </mat-panel-title>
            <mat-panel-description i18n="@@textViewerAppDescription">
              Displays searchable Text
            </mat-panel-description>
          </mat-expansion-panel-header>

          <ng-container i18n="@@appUnderDevelopmentLabel">
            This app is under development.
          </ng-container>
          <ng-container i18n="@@textViewerApp">
            It displays searchable text which can be changed regarding the font size, the design.
          </ng-container>

          <mat-divider></mat-divider>

          <button mat-button (click)="addAnotherApp('textViewer', true)"><mat-icon>view_headline</mat-icon> Add Text Viewer</button><br>

        </mat-expansion-panel>


        <mat-expansion-panel style="width: 300px; margin-top: 10px;" [expanded]="panelsOpen" >
          <mat-expansion-panel-header >
            <mat-panel-title i18n="@@textViewerAppLabel">
              HTML Viewer
            </mat-panel-title>
            <mat-panel-description i18n="@@textViewerAppDescription">
              Displays HTML with possible configuration
            </mat-panel-description>
          </mat-expansion-panel-header>

          <ng-container i18n="@@appUnderDevelopmentLabel">
            This app is under development.
          </ng-container>
          <ng-container i18n="@@textViewerApp">
            It displays HTML snippets and applies externally defined styles to the view.
          </ng-container>

          <mat-divider></mat-divider>

          <button mat-button (click)="addAnotherApp('htmlViewer', true)"><mat-icon>view_headline</mat-icon> Add HTML Viewer</button><br>

        </mat-expansion-panel>


        <mat-expansion-panel style="width: 300px; margin-top: 10px;" [expanded]="panelsOpen" >
          <mat-expansion-panel-header>
            <mat-panel-title>
              Plaintext Viewer <span style="color: #4dc71f" >✓</span>
            </mat-panel-title>
            <mat-panel-description>
              Displays searchable Text
            </mat-panel-description>
          </mat-expansion-panel-header>

          This app can be combined with the data - chooser. A tutorial on how to use the data - chooser will follow.

          <mat-divider></mat-divider>

          <button mat-button (click)="addAnotherApp('textlistViewers', true)"><mat-icon>short_text</mat-icon>Add Textlist - Viewer</button><br>

        </mat-expansion-panel>

        <mat-expansion-panel style="width: 300px; margin-top: 10px;" [expanded]="panelsOpen" >
          <mat-expansion-panel-header>
            <mat-panel-title>
              SVG-Transcription
            </mat-panel-title>
            <mat-panel-description>
              svg-text
            </mat-panel-description>
          </mat-expansion-panel-header>

          SVG transcription with exact word positions

          <mat-divider></mat-divider>

          <button mat-button (click)="addAnotherApp('svgTranscription', true)">Add SVG Transcription View</button><br>

        </mat-expansion-panel>

      </details>

      <!-- project specific -->
      <details style="margin-top: 35px; width: 300px;">
        <summary style="cursor: pointer"><h4 style="align-content: center; display: inline;">Project Specific</h4><h4 style="align-content: center; display: inline; color: #4dc71f">&nbsp;Apps</h4></summary>

        <mat-expansion-panel style="width: 300px; padding-top: 10px;" [expanded]="panelsOpen" >
          <mat-expansion-panel-header>
            <mat-panel-title>
              Parzival - Fassung <span style="color: #4dc71f" >✓</span>
            </mat-panel-title>
            <mat-panel-description>
              shortname: pF
            </mat-panel-description>
          </mat-expansion-panel-header>

          Project specific App for the Parzival Project

          <mat-divider></mat-divider>

          <button mat-button (click)="addAnotherApp('parzivalFassung', true)">Add Parzival Fassung</button><br>

        </mat-expansion-panel>

        <mat-expansion-panel style="width: 300px; margin-top: 10px;" [expanded]="panelsOpen" >
          <mat-expansion-panel-header>
            <mat-panel-title>
              AVP-Edition
            </mat-panel-title>
            <mat-panel-description>
              avp-e
            </mat-panel-description>
          </mat-expansion-panel-header>

          Project specific App for the AVP Project

          <mat-divider></mat-divider>

          <button mat-button (click)="addAnotherApp('avpEditionView', true)">Add AVP Edition View</button><br>

        </mat-expansion-panel>
      </details>

      <!-- Images -->
      <details style="margin-top: 35px; width: 300px;">
        <summary style="cursor: pointer"><h4 style="align-content: center; display: inline;">Image</h4><h4 style="align-content: center; display: inline; color: #4dc71f">&nbsp;Apps</h4></summary>

        <mat-expansion-panel style="width: 300px; margin-top: 10px;" [expanded]="panelsOpen" >

          <mat-expansion-panel-header>
            <mat-panel-title>
              Image Viewer <span style="color: #4dc71f" >✓</span>
            </mat-panel-title>
            <mat-panel-description>
              Display and zoom in images
            </mat-panel-description>
          </mat-expansion-panel-header>

          This app displays the image of your choice with the OpenSea - Dragon - Plugin. You can zoom in and have
          a look at it in fullscreen - mode. The documentation of this App can be found
          <a href="https://nie-ine.github.io/nieOS/components/ImageFrameComponent.html" target="_blank">here</a>.

          <mat-divider></mat-divider>

          <button mat-button (click)="addAnotherApp('imageViewer', true)" >
            <mat-icon >image</mat-icon>
            Add Image Viewer</button><br>

        </mat-expansion-panel>

        <mat-expansion-panel style="width: 300px; margin-top: 10px;" [expanded]="panelsOpen" >
          <mat-expansion-panel-header>
            <mat-panel-title>
              Simple Image App <span style="color: #4dc71f" >✓</span>
            </mat-panel-title>
            <mat-panel-description>
              Displays simple image
            </mat-panel-description>
          </mat-expansion-panel-header>
          Description
          <mat-divider></mat-divider>

          <button mat-button (click)="addAnotherApp('simpleImageApp', true)"><mat-icon>add_photo_alternate</mat-icon>Add Image - Viewer</button><br>

        </mat-expansion-panel>
      </details>

      <details style="margin-top: 35px; width: 300px;">
        <summary style="cursor: pointer"><h4 style="align-content: center; display: inline;">Search & Retrieve</h4><h4 style="align-content: center; display: inline; color: #4dc71f">&nbsp;Apps</h4></summary>

      <mat-expansion-panel style="width: 300px; margin-top: 10px;" [expanded]="panelsOpen" >
        <mat-expansion-panel-header>
          <mat-panel-title>
            Simple Full Text Search
          </mat-panel-title>
          <mat-panel-description>
            Search in all resources
          </mat-panel-description>
        </mat-expansion-panel-header>

        This app searches in all resources of your project and provides a simple output. It is still under development.

        <mat-divider></mat-divider>

        <button mat-button (click)="addAnotherApp('searchViewer', true)">
          <mat-icon >search</mat-icon>
          Add search Viewer
        </button><br>

      </mat-expansion-panel>

      <mat-expansion-panel style="width: 300px; margin-top: 10px;" [expanded]="panelsOpen" >
        <mat-expansion-panel-header>
          <mat-panel-title>
            Data list viewer
          </mat-panel-title>
          <mat-panel-description>
            Displays query results in a table format.
          </mat-panel-description>
        </mat-expansion-panel-header>

        This app can be combined with the data - chooser. A tutorial on how to use the data - chooser will follow.

        <mat-divider></mat-divider>

        <button mat-button (click)="addAnotherApp('dataListView', true)"><mat-icon>short_text</mat-icon>Add a data list / data table</button><br>
      </mat-expansion-panel>

        <mat-expansion-panel style="width: 300px; margin-top: 10px;" [expanded]="panelsOpen" >
          <mat-expansion-panel-header>
            <mat-panel-title>
              Tree navigation
            </mat-panel-title>
            <mat-panel-description>
              Displays a navigable tree structure.
            </mat-panel-description>
          </mat-expansion-panel-header>

          This app can be combined with apps for resource view.

          <mat-divider></mat-divider>

          <button mat-button (click)="addAnotherApp('treeNavigation', true)"><mat-icon>short_text</mat-icon>Add a tree navigation</button><br>
        </mat-expansion-panel>

      </details>

      <details style="margin-top: 35px; width: 300px;">
        <summary style="cursor: pointer"><h4 style="align-content: center; display: inline;">Multimedia</h4><h4 style="align-content: center; display: inline; color: #4dc71f">&nbsp;Apps</h4></summary>

      <mat-expansion-panel style="width: 300px; margin-top: 10px;" [expanded]="panelsOpen" >
        <mat-expansion-panel-header>
          <mat-panel-title>
            Synopsis Viewer
          </mat-panel-title>
          <mat-panel-description>
            Compare images and texts
          </mat-panel-description>
        </mat-expansion-panel-header>

        This app is under development. It has the functionality of a light - table and can compare image and text objects.
        It is currently working much better as an own window and can be opened as an own window <a href="/synopsis" target="_blank">here</a>.

        <mat-divider></mat-divider>

        <button mat-button (click)="addAnotherApp('synopsisViewer', true)"><mat-icon>art_track</mat-icon> Add Synopsis Viewer</button><br>
      </mat-expansion-panel>

      <mat-expansion-panel style="width: 300px; margin-top: 10px;" [expanded]="panelsOpen" >
        <mat-expansion-panel-header>
          <mat-panel-title>
            Json Viewer <span style="color: #4dc71f" >✓</span>
          </mat-panel-title>
          <mat-panel-description>
            Visualise Json Data
          </mat-panel-description>
        </mat-expansion-panel-header>

        This app visualizes json objects as a tree.

        <mat-divider></mat-divider>

        <button mat-button (click)="addAnotherApp('jsonViewer', true)"><mat-icon>spa</mat-icon> Add Data Chooser</button><br>

      </mat-expansion-panel>

      </details>

      <!-- Data visualization -->
      <details style="margin-top: 35px; width: 300px;">
        <summary style="cursor: pointer"><h4 style="align-content: center; display: inline;">Visualisation</h4><h4 style="align-content: center; display: inline; color: #4dc71f">&nbsp;Apps</h4></summary>

        <mat-expansion-panel style="width: 300px; margin-top: 10px;" [expanded]="panelsOpen" >
          <mat-expansion-panel-header>
            <mat-panel-title>
              Bar Chart
            </mat-panel-title>
            <mat-panel-description>
              To define data with two dimensions
            </mat-panel-description>
          </mat-expansion-panel-header>

          This app is under development

          <mat-divider></mat-divider>

          <button mat-button (click)="addAnotherApp('barCharts', true)"><mat-icon>bar_chart</mat-icon> Add Bar Chart</button><br>

        </mat-expansion-panel>

        <mat-expansion-panel style="width: 300px; margin-top: 10px;" [expanded]="panelsOpen" >
          <mat-expansion-panel-header>
            <mat-panel-title>
              Spiral Bar Chart
            </mat-panel-title>
            <mat-panel-description>
              To define data large bar charts
            </mat-panel-description>
          </mat-expansion-panel-header>

          This app is under development

          <mat-divider></mat-divider>

          <button mat-button (click)="addAnotherApp('spiralBarCharts', true)"><mat-icon>bar_chart</mat-icon> Add Bar Chart</button><br>

        </mat-expansion-panel>

        <mat-expansion-panel style="width: 300px; margin-top: 10px;" [expanded]="panelsOpen" >
          <mat-expansion-panel-header>
            <mat-panel-title>
              Line Chart
            </mat-panel-title>
            <mat-panel-description>
              To define data with two dimensions
            </mat-panel-description>
          </mat-expansion-panel-header>

          This app is under development

          <mat-divider></mat-divider>

          <button mat-button (click)="addAnotherApp('lineCharts', true)"><mat-icon>show_chart</mat-icon> Add Line Chart</button><br>

        </mat-expansion-panel>

        <mat-expansion-panel style="width: 300px; margin-top: 10px;" [expanded]="panelsOpen" >
          <mat-expansion-panel-header>
            <mat-panel-title>
              Brush Zoom
            </mat-panel-title>
            <mat-panel-description>
              To define data with two dimensions
            </mat-panel-description>
          </mat-expansion-panel-header>

          This app is under development

          <mat-divider></mat-divider>

          <button mat-button (click)="addAnotherApp('brushZoomCharts' , true)"><mat-icon>insert_chart_outlined</mat-icon> Add Brush Zoom Chart</button><br>

        </mat-expansion-panel>

        <mat-expansion-panel style="width: 300px; margin-top: 10px;" [expanded]="panelsOpen" >
          <mat-expansion-panel-header>
            <mat-panel-title>
              Leaflet map
            </mat-panel-title>
            <mat-panel-description>
              Visualize data on maps
            </mat-panel-description>
          </mat-expansion-panel-header>

          This app is under development

          <mat-divider></mat-divider>

          <button mat-button (click)="addAnotherApp('leafletMaps', true)"><mat-icon>add_location</mat-icon> Add Leaflet Map</button><br>

        </mat-expansion-panel>

        <mat-expansion-panel style="width: 300px; margin-top: 10px;" [expanded]="panelsOpen" >
          <mat-expansion-panel-header>
            <mat-panel-title>
              Pie Chart
            </mat-panel-title>
            <mat-panel-description>
              To visualise subsets
            </mat-panel-description>
          </mat-expansion-panel-header>

          This app is under development

          <mat-divider></mat-divider>

          <button mat-button (click)="addAnotherApp('pieCharts', true)"><mat-icon>pie_chart</mat-icon> Add Pie Chart</button><br>

        </mat-expansion-panel>

        <mat-expansion-panel style="width: 300px; margin-top: 10px;" [expanded]="panelsOpen" >
          <mat-expansion-panel-header>
            <mat-panel-title>
              Radial Bar Chart
            </mat-panel-title>
            <mat-panel-description>
              To two dimensional data
            </mat-panel-description>
          </mat-expansion-panel-header>

          This app is under development

          <mat-divider></mat-divider>

          <button mat-button (click)="addAnotherApp('radialBarCharts', true)"><mat-icon>multiline_chart</mat-icon> Add Radial Bar Chart</button><br>

        </mat-expansion-panel>

        <mat-expansion-panel style="width: 300px; margin-top: 10px;" [expanded]="panelsOpen" >
          <mat-expansion-panel-header>
            <mat-panel-title>
              Sankey
            </mat-panel-title>
            <mat-panel-description>
              To display dependend data
            </mat-panel-description>
          </mat-expansion-panel-header>

          This app is under development

          <mat-divider></mat-divider>

          <button mat-button (click)="addAnotherApp('sankeyCharts', true)"><mat-icon>linear_scale</mat-icon> Add Sankey Chart</button><br>

        </mat-expansion-panel>

        <mat-expansion-panel style="width: 300px; margin-top: 10px;" [expanded]="panelsOpen" >
          <mat-expansion-panel-header>
            <mat-panel-title>
              Stacked Bar Chart
            </mat-panel-title>
            <mat-panel-description>
              To display grouped sets
            </mat-panel-description>
          </mat-expansion-panel-header>

          This app is under development

          <mat-divider></mat-divider>

          <button mat-button (click)="addAnotherApp('stackedBarCharts', true)"><mat-icon>view_list</mat-icon> Add Stacked Bar Chart</button><br>

        </mat-expansion-panel>


        <mat-expansion-panel style="width: 300px; margin-top: 10px;" [expanded]="panelsOpen" >
          <mat-expansion-panel-header>
            <mat-panel-title>
              Chord diagram
            </mat-panel-title>
            <mat-panel-description>
              To compare intensity of connections
            </mat-panel-description>
          </mat-expansion-panel-header>

          This app is under development

          <mat-divider></mat-divider>

          <button mat-button (click)="addAnotherApp('chordDiagrams', true)"><mat-icon>all_out</mat-icon> Add Chord Diagram</button><br>

        </mat-expansion-panel>
      </details>

      <!-- Data insertion -->
      <details style="margin-top: 35px; width: 300px;">
        <summary style="cursor: pointer"><h4 style="align-content: center; display: inline;">Insertion</h4><h4 style="align-content: center; display: inline; color: #4dc71f">&nbsp;Apps</h4></summary>



        <mat-expansion-panel style="width: 300px; margin-top: 10px;" [expanded]="panelsOpen" >
          <mat-expansion-panel-header>
            <mat-panel-title>
              Resource Creation
            </mat-panel-title>
            <mat-panel-description>
              For Knora
            </mat-panel-description>
          </mat-expansion-panel-header>

          With this app you can create data in Knora.

          <mat-divider></mat-divider>

          <button mat-button (click)="addAnotherApp('createResourceForm', true)"><mat-icon>add_to_queue</mat-icon> Add Creation Form</button>

        </mat-expansion-panel>

        <mat-expansion-panel style="width: 300px; margin-top: 10px;" [expanded]="panelsOpen" >
          <mat-expansion-panel-header>
            <mat-panel-title>
              Edit Resource
            </mat-panel-title>
            <mat-panel-description>
              For Knora
            </mat-panel-description>
          </mat-expansion-panel-header>

          With this app you can change data in Knora and see the history of given properties.

          <mat-divider></mat-divider>

          <button mat-button (click)="addAnotherApp('editResourceForm', true)"><mat-icon>add_to_queue</mat-icon> Add Edit Form</button>

        </mat-expansion-panel>
      </details>

    </mat-drawer>
<!--    <div>-->
<!--      <link rel="stylesheet"  type="text/css" [href]='cssUrl'>-->

<!--    <div>-->
<!--      <p>-->
<!--        Le site <em>L’Homme des champs : éditer une réception littéraire</em>-->
<!--        constitue l'un des volets d'un <strong>programme de recherche</strong>-->
<!--        plus vaste, le projet <a href="https://delille.philhist.unibas.ch/" target="_blank">Reconstruire Delille</a>,-->
<!--        mené au sein des universités de Bâle et Neuchâtel, soutenu par le Fonds national suisse de la recherche scientifique-->
<!--        (<a href="http://www.snf.ch/fr/Pages/default.aspx" target="_blank">FNS</a>) et associé à l'infrastructure pour l'édition-->
<!--        <a href="http://www.fee.unibas.ch/index.html" target="_blank">FEE/NIE</a>.-->
<!--      </p>-->
<!--      <p>-->
<!--        Le présent travail rassemble différents <a href="">contributeurs</a>.-->
<!--      </p>-->
<!--    </div>-->

<!--    <h2>Pourquoi proposer en ligne une édition &quot;inverse&quot; ?</h2>-->
<!--    <div>-->
<!--      <p>-->
<!--        Le site tente d&#039;annoter un texte poétique, le chant 3 de-->
<!--        <em>L&#039;Homme des champs</em> de Jacques Delille, en proposant des informations, non sur les sources utilisées-->
<!--        par l&#039;auteur, ni sur le sens de termes difficiles, mais sur la <strong>réception</strong> dont ce texte a fait-->
<!--        l&#039;objet. Ce travail ne regarde donc pas vers l&#039;<strong>amont</strong> du poème, mais toujours vers l&#039;-->
<!--        <strong>aval</strong>. Il tente de déployer et de cartographier ce que l&#039;on pourrait nommer “l&#039;œuvre-->
<!--        de l&#039;œuvre”, c&#039;est-à-dire son <strong>impact</strong>. La démarche doit en effet permettre de-->
<!--        reconstituer et d&#039;analyser avec un grand degré de finesse la place que ces vers, publiés en 1800,-->
<!--        ont tenue dans la culture du 19<sup>e</sup> siècle, en France comme dans le reste de l&#039;Europe, c&#039;est-à-dire-->
<!--        la manière dont ils ont été commentés, réutilisés, parodiés, illustrés, traduits, etc.-->
<!--      </p>-->
<!--      <p>-->
<!--        Cette édition en ligne double la mise en œuvre, simultanée, d&#039;une-->
<!--        <strong>édition scientifique traditionnelle</strong> de <em>L&#039;Homme des champs</em>.-->
<!--        Elle n&#039;entend donc pas s&#039;y substituer, ce qui explique que le texte principal soit présenté ici sans-->
<!--        aucune des précisions attendues d&#039;une édition scientifique.-->
<!--      </p>-->
<!--      <p>-->
<!--        Seuls quelques éclaircissements philologiques s&#039;imposent.-->
<!--      </p>-->
<!--      <hr />-->
<!--      <p>-->
<!--        <strong>Textes suivis</strong>-->
<!--      </p>-->
<!--      <p>-->
<!--        La leçon suivie ici pour <em>L&#039;Homme des champs</em> est celle de la “nouvelle édition augmentée” de-->
<!--        <strong>1805</strong>, dans laquelle Delille apporte d&#039;importantes modifications au texte original, publié en-->
<!--        1800. Conformément aux usages des libraires de l&#039;époque, cette édition augmentée a été simultanément mise en-->
<!--        vente sous plusieurs formats. Notre texte est celui des volumes <strong>in-8</strong> publiés à Paris par Levrault,-->
<!--        Schoell et Cie, et imprimés par Didot, avec 13 “figures” (un de ces exemplaires est consultable en ligne, sur-->
<!--        <a href="http://gallica.bnf.fr/ark:/12148/bpt6k5445687m" target="_blank">Gallica</a>).-->
<!--      </p>-->

<!--      <p>-->
<!--        Les références des autres documents figurent dans chaque fiche.-->
<!--      </p>-->

<!--      <p>-->
<!--        L&#039;<strong>orthographe</strong> d&#039;origine est partout conservée.-->
<!--      </p>-->
<!--      <hr />-->

<!--      <p>-->
<!--        <strong>Un “poème scientifique”</strong>-->
<!--      </p>-->

<!--      <p>-->
<!--        Incitation à fréquenter la campagne,-->
<!--        <em>L&#039;Homme des champs</em> se divise en <strong>quatre chants</strong>, “tous relatifs-->
<!--        aux jouissances champêtres” qui attendent un riche propriétaire. Ces sections évoquent successivement les plaisirs-->
<!--      </p>-->
<!--      <ol>-->
<!--        <li class="level1"><div class="li"> du “sage”, qui savoure le calme de la nature, tout en s&#039;attachant-->
<!--          à répandre l&#039;instruction et le progrès parmi les habitants du lieu,</div>-->
<!--        </li>-->
<!--        <li class="level1"><div class="li"> de “l&#039;agriculteur”, grand entrepreneur capable d&#039;améliorer les-->
<!--          terrains en engageant de grands travaux de terrassement ou d&#039;irrigation,</div>-->
<!--        </li>-->
<!--        <li class="level1"><div class="li"> de “l&#039;observateur naturaliste”, qui, initié aux sciences de la terre et-->
<!--          de la vie, découvre autour de lui un monde insoupçonné,</div>-->
<!--        </li>-->
<!--        <li class="level1"><div class="li"> du “poëte des champs”, qui apprend “à célébrer, en vers dignes de la nature,-->
<!--          ses phénomènes et ses richesse”.</div>-->
<!--        </li>-->
<!--      </ol>-->

<!--      <p>-->
<!--        Présentes dès 1800, les <strong>notes</strong> savantes qui suivent les vers du chant 3, sur la-->
<!--        <a href="">page principale</a>, sont dues à Delille<sup><a href="#refnotes:1:note1"-->
<!--                                                                   name="refnotes:1:ref1" class="refnotes-ref">1</a></sup>,-->
<!--        au naturaliste strasbourgeois Jean Hermann, ou aux éditeurs-libraires. Elles font donc pleinement partie de l&#039;œuvre,-->
<!--        mais, quand elles ne sont pas signées par Delille, elles constituent aussi déjà un discours <strong>produit par ses vers</strong>,-->
<!--        soit un élément de réception auquel ont à leur tour réagi certains lecteurs, comme-->
<!--        <a href="" title="guinguenecompterendudecade">Ginguené</a>. La même analyse vaut pour les illustrations du poème.-->
<!--      </p>-->
<!--      <hr />-->

<!--      <p>-->
<!--        Trois motifs ont milité pour que l&#039;enquête porte d&#039;abord sur le chant 3 :-->
<!--      </p>-->
<!--      <ul>-->
<!--        <li class="level1"><div class="li">-->
<!--          Il s&#039;agit de la portion du poème qui dialogue le plus nettement avec les sciences. Or la possibilité d&#039;-->
<!--          <strong>allier science et poésie</strong> constitue à la fois un trait majeur de la poétique de Delille, et l&#039;objet d&#039;un-->
<!--          débat extrêmement nourri tout au long du siècle<sup>-->
<!--          <a href="#refnotes:1:note2" name="refnotes:1:ref2" class="refnotes-ref">2</a></sup>.</div>-->
<!--        </li>-->
<!--        <li class="level1"><div class="li"> Delille lui-même a indiqué dans sa préface qu&#039;il tenait-->
<!--          le chant sur les sciences naturelles comme la partie la plus <strong>novatrice</strong> de-->
<!--          <em>L&#039;Homme des champs</em> : “Le sujet de ce chant, écrit-il, est le plus fécond de tous, et jamais-->
<!--          une carrière et plus vaste et plus neuve ne fut ouverte à la poésie”.</div>-->
<!--        </li>-->
<!--        <li class="level1"><div class="li"> Le chant 3 est relativement peu touché par les modifications introduites en 1805-->
<!--          <sup><a href="#refnotes:1:note3" name="refnotes:1:ref3" class="refnotes-ref">3</a></sup>. L&#039;écart entre les-->
<!--          deux versions fut donc faible, ce qui évite d&#039;avoir à suivre la réception de deux lignées divergentes.</div>-->
<!--        </li>-->
<!--      </ul>-->

<!--      <p>-->
<!--        Le choix d&#039;une publication en ligne, sous forme de-->
<!--        <a href="https://fr.wikipedia.org/wiki/Wiki" target="_blank" title="https://fr.wikipedia.org/wiki/Wiki">wiki</a>,-->
<!--        permet au projet d&#039;intégrer différents contributeurs, d&#039;offrir aux utilisateurs la possibilité de se-->
<!--        reporter immédiatement aux autres œuvres citées, et de disposer d&#039;une <strong>structure évolutive</strong>,-->
<!--        adaptée à l&#039;ajout progressif de références nouvelles.-->
<!--      </p>-->

<!--    </div>-->

<!--    <h2>L&#039;oreille et l&#039;œil</h2>-->
<!--    <div>-->
<!--      <p>-->
<!--        Reflet des régimes de sociabilité de l&#039;Ancien Régime et du rôle important que la poésie du premier-->
<!--        19<sup>e</sup> siècle donnait encore à la performance orale des textes, la poésie de Delille ne s&#039;est-->
<!--        pas seulement diffusée sous forme imprimée, mais à travers les nombreuses <strong>lectures</strong>-->
<!--        publiques qu&#039;il en a lui-même données, dans le cadre privé des salons, ou lors de cérémonies officielles-->
<!--        (notamment au Collège de France et à l&#039;Académie française, dont il était membre). Traitées comme des-->
<!--        événements, de telles manifestations attiraient un public d&#039;autant plus nombreux que les talents de lecteur-->
<!--        de Delille étaient célèbres : ils lui valurent le surnom de “dupeur d&#039;oreilles”. Aussi ces apparitions-->
<!--        firent-elles l&#039;objet dans la presse de comptes rendus, dont les auteurs citent volontiers certains des vers lus,-->
<!--        voire des passages entiers, reconstitués de mémoire.-->
<!--      </p>-->
<!--      <p>-->
<!--        C&#039;est ce qui explique que les œuvres de Delille, et notamment-->
<!--        <em>L&#039;Homme des champs</em>, aient été connues et commentées avant même d&#039;être disponibles sous forme-->
<!--        imprimée. Notre édition inverse rend compte de ce phénomène. Elle intègre des <strong>éléments de réception</strong>-->
<!--        de l&#039;œuvre qui peuvent être <strong>antérieurs à sa première publication</strong> (1800) et remonter à-->
<!--        <a href="[LINK TO A GIVEN PAGE]" title="correspondance_litt021775">1775</a>. Sous cet angle, les documents-->
<!--        réunis entendent soulever deux questions :-->
<!--      </p>-->
<!--      <ul>-->
<!--        <li class="level1"><div class="li">-->
<!--          dans quelle mesure les traces écrites laissées par les lectures orales permettent-elles, sinon de les-->
<!--          reconstituer, du moins de <strong>réunir des indications sur elles</strong> ?</div>-->
<!--        </li>-->
<!--        <li class="level1"><div class="li"> quelle forme ces phénomènes de <strong>réception de l&#039;œuvre “avant l&#039;œuvre”</strong>-->
<!--          ont-ils pris ?</div>-->
<!--        </li>-->
<!--      </ul>-->
<!--    </div>-->

<!--    <h2>Modéliser une vogue</h2>-->
<!--    <div class="level2">-->
<!--      <p>-->
<!--        Acclamé de son vivant, Delille a par la suite progressivement sombré dans l&#039;oubli, un oubli auquel a-->
<!--        contribué la violence des <strong>attaques</strong> que son œuvre a subies de la part des auteurs qui ont-->
<!--        dominé le canon littéraire après 1820. Suivre la réception de ces textes, c&#039;est donc se lancer sur la-->
<!--        piste d&#039;une brusque rupture – <strong>le congé que le romantisme donna à la poésie du 18<sup>e</sup> siècle</strong>.-->
<!--      </p>-->
<!--      <p>-->
<!--        Reconstituer avec finesse les échos reçus au fil du siècle par le segment d&#039;un de ses poèmes les plus-->
<!--        acclamés doit permettre d&#039;analyser et comprendre de manière plus poussée les <strong>dynamiques qui ont-->
<!--        conduit à sa célébrité, puis à sa disparition</strong>. Quels arguments furent mis en avant pour louer ou-->
<!--        décrire son écriture ? Quels vers ont été les plus cités, ou parodiés ? Les processus de <strong>célébration</strong>-->
<!--        et de <strong>minoration</strong> de l&#039;auteur sont-ils rattachés à des renvois précis à ses vers ? Ces derniers-->
<!--        ont-ils parfois pu rester dans les mémoires sans que leur origine ne demeure consciente ? Ont-ils pu devenir des lieux communs ?-->
<!--      </p>-->
<!--      <p>-->
<!--        Soulever ces questions revient à lier la réception littéraire à des phénomènes plus larges, et très actuels,-->
<!--        mais dont l&#039;<strong>archéologie</strong> mérite d&#039;être tentée. Peut-on parler, à propos de-->
<!--        Delille, de phénomènes de <strong>viralité</strong>, comparables à ceux qui s&#039;observent aujourd&#039;hui-->
<!--        sur Internet ? Quels vers — et quels éléments de discours associés à ces vers – se sont-ils constitués en-->
<!--        <strong>mèmes</strong>, terme pris ici au sens d&#039;unités discursives susceptibles d&#039;être fortement-->
<!--        reproduites d&#039;une génération à l&#039;autre ? Selon quel biais cette sélection est-elle intervenue ?-->
<!--        Quel a été, par exemple, le rôle de la presse, des dictionnaires ou des manuels scolaires, dans la manière dont-->
<!--        ces segments privilégiés ont été sélectionnés ? Ou encore, celui de Delille lui-même, qui, dans ses poèmes-->
<!--        ultérieurs, est fréquemment revenu sur <em>L&#039;Homme des champs</em> ?-->
<!--      </p>-->
<!--    </div>-->

<!--    <h2>Distinguer des tendances</h2>-->
<!--    <div class="level2">-->
<!--      <p>-->
<!--        L&#039;inventaire doit non seulement mettre au jour des mécanismes de diffusion, de-->
<!--        sélection et d&#039;effacement, mais aussi des <strong>phénomènes d&#039;altération</strong> :-->
<!--        le texte de Delille ne survit pas sans heurts à sa diffusion. Il est transformé, des citations fautives s&#039;imposant-->
<!--        ici et là à la place du texte original.-->
<!--      </p>-->
<!--      <p>-->
<!--        Surtout, il ne connaît pas la même fortune selon les <strong>groupes</strong>.-->
<!--      </p>-->
<!--      <ul>-->
<!--        <li class="level1"><div class="li"> Les “classiques” furent-ils unanimes à le défendre, et les “romantiques”-->
<!--          tous d&#039;accord pour le railler ? <a href="[LINK TO A CITATION]" title="gautiercomedie">Théophile Gautier</a>-->
<!--          fut-il le seul “moderne” à lui emprunter un beau vers ?</div>-->
<!--        </li>-->
<!--        <li class="level1"><div class="li"> Les scientifiques et vulgarisateurs lurent-ils autrement que le reste du-->
<!--          public un chant tout entier voué aux sciences naturelles, et le souvenir du poème perdura-t-il plus longtemps-->
<!--          sous leur plume ?</div>-->
<!--        </li>-->
<!--        <li class="level1"><div class="li"> Cette étude de réception peut-elle indiquer si, et quand, Delille s&#039;est-->
<!--          mué en poète pour <em>bourgeois</em> ou pour <em>provinciaux</em>, comme le pensait Balzac ?</div>-->
<!--        </li>-->
<!--      </ul>-->

<!--    </div>-->

<!--    <h2>Voir le dix-neuvième siècle autrement</h2>-->
<!--    <div class="level2">-->

<!--      <p>-->
<!--        Réunir les échos reçus tout au long du 19<sup>e</sup> siècle par quelques centaines de vers, publiés-->
<!--        à l&#039;aube de cette période, revient aussi à observer cette dernière sous un jour inattendu, pour y-->
<!--        découvrir des textes méconnus, comme l&#039;<a href="" class="wikilink1" title="dauxpetitshommes">éloge de-->
<!--        la petitesse</a> de l&#039;abbé Daux, mais surtout, pour pratiquer dans la masse des discours du temps-->
<!--        une <strong>ponction inédite</strong>. Quelle unité trouver entre toutes les œuvres que traversent des références-->
<!--        au chant 3 de <em>L&#039;Homme des champs</em> ? Quel 19<sup>e</sup> siècle cette collection est-elle susceptible-->
<!--        de peindre ? En quoi se distingue-t-il d&#039;autres portraits possibles de la période, et comment son-->
<!--        exploration peut-elle perturber nos habitudes, secouer nos certitudes ?-->
<!--      </p>-->
<!--      <p>-->
<!--        Plus largement, qu&#039;est-ce qu&#039;une telle entreprise peut-nous apprendre sur la place dévolue, non pas-->
<!--        seulement à Delille au sein de la littérature de cette période, mais à la littérature au sein d&#039;un vaste-->
<!--        discours social – un <strong>éventail de pratiques, de disciplines et de débats</strong> où l&#039;on ne s&#039;attendrait-->
<!--        pas forcément à trouver des références à <em>L&#039;Homme des champs</em> ?-->
<!--      </p>-->
<!--    </div>-->

<!--    <h2>L&#039;inventaire doit-il être exhaustif ?</h2>-->
<!--    <div class="level2">-->
<!--      <p>-->
<!--        Repérer l&#039;ensemble des échos qu&#039;un texte a pu recevoir sur près d&#039;un siècle tient-->
<!--        évidemment de la <strong>gageure</strong>, même si, pour des raisons de faisabilité, l&#039;inventaire se-->
<!--        limite pour le moment au seul chant 3.-->
<!--      </p>-->
<!--      <p>-->
<!--        Le but du projet n&#039;est pas de recenser toutes les marques de réception, mais d&#039;intégrer un-->
<!--        nombre d&#039;exemples suffisamment variés et divers pour penser atteindre une bonne <strong>représentativité</strong>.-->
<!--        <em>Work in progress</em>, cette édition en ligne est appelée à se développer au fil des trouvailles.-->
<!--      </p>-->
<!--      <p>-->
<!--        Sur un plan pratique, la collecte s&#039;appuie sur les possibilités de recherche en mode “plein texte” offertes-->
<!--        par les grands <strong>bibliothèques numériques</strong>. Les contributeurs formulent des requêtes permettant de-->
<!--        repérer la manière dont un vers donné (voire ses seuls termes clés) apparaît dans les collections de Gallica,-->
<!--        Europeana, GoogleBooks, HathiTrust, InternetArchive, etc.-->
<!--      </p>-->
<!--    </div>-->

<!--    <h2>Le projet a-t-il vocation à accueillir des collaborations externes ?</h2>-->
<!--    <div class="level2">-->
<!--      <p>-->
<!--        Bien qu&#039;il constitue un wiki, <strong>le site ne permet pas aux visiteurs d&#039;intervenir sur son-->
<!--        contenu</strong>. Cette possibilité pourra être offerte à moyen terme, mais seulement à l&#039;issue d&#039;une-->
<!--        phase de test encore en cours.-->
<!--      </p>-->
<!--      <p>-->
<!--        Si vous souhaitez être associé(e) au projet, merci de <strong>contacter</strong> <a href="" title="collaborateurs">l&#039;équipe</a>.-->
<!--      </p>-->

<!--    </div>-->

<!--    <h2>Bibliographie</h2>-->
<!--    <div class="level2">-->
<!--      <p>-->
<!--        <strong>Ouvrages et articles</strong>-->
<!--      </p>-->
<!--      <p>-->
<!--        <br/>-->
<!--        Voir le site <a href="https://delille.philhist.unibas.ch/poete.html" target="_blank" title="https://delille.philhist.unibas.ch/poete.html">Reconstruire Delille</a>.-->
<!--      </p>-->

<!--      <p>-->
<!--        <br/>-->
<!--        <strong>Ressources numériques</strong>-->
<!--        <br/>-->

<!--      </p>-->
<!--      <ul>-->
<!--        <li class="level1"><div class="li"> Une analyse métrique complète du chant 3, dans la version de 1800, a été menée dans le cadre du projet ANAMÈTRE (CRISCO, université de Caen) : <a href="http://www.crisco.unicaen.fr/~stage/Verlaine/index.php?navigation=textesauteurs&amp;auteur=DEL_2&amp;code_text=DEL7" target="_blank" title="http://www.crisco.unicaen.fr/~stage/Verlaine/index.php?navigation=textesauteurs&amp;auteur=DEL_2&amp;code_text=DEL7">lien</a>.</div>-->
<!--        </li>-->
<!--      </ul>-->
<!--      <hr />-->
<!--    </div>-->
<!--    <div class="refnotes">-->
<!--      <hr>-->
<!--      <div class="notes">-->
<!--        <div class="note justify">-->
<!--          <sup><b><a href="#refnotes:1:ref1" name="refnotes:1:note1" class="backref">1</a></b></sup>-->
<!--          <span id="refnotes:1:note1:text">-->
<!--Elles sont alors distinguées dès le texte original par la mention “Note de l&#039;auteur”.-->
<!--</span></div>-->
<!--        <div class="note justify">-->
<!--          <sup><b><a href="#refnotes:1:ref2" name="refnotes:1:note2" class="backref">2</a></b></sup>-->
<!--          <span id="refnotes:1:note2:text">-->
<!--Voir Hugues Marchal (dir.), <em>Muses et ptérodactyles : la poésie de la science de Chénier à Rimbaud</em>, Paris, Seuil, 2013.-->
<!--</span></div>-->
<!--        <div class="note justify">-->
<!--          <sup><b><a href="#refnotes:1:ref3" name="refnotes:1:note3" class="backref">3</a></b></sup>-->
<!--          <span id="refnotes:1:note3:text">-->
<!--Le seul ajout important est le texte de l&#039;argument liminaire.-->
<!--</span></div>-->
<!--      </div>-->
<!--    </div>-->

    <div *ngIf="grapesJSActivated" id="grapesJSViewer" style="z-index: -1; position: absolute; "></div>



      <div style="margin-top: 30px; vertical-align: bottom;">
        <button type="button" mat-button (click)="drawer.toggle()" matTooltip='{{ createTooltip() }}'>
          <mat-icon color="primary" >chrome_reader_mode</mat-icon> <h4 style="align-content: center" *ngIf="pageAsDemo">Demo</h4>
        </button>
      </div>

      <!-- Image Viewer -->
      <div *ngFor="let imageViewer of openAppsInThisPage[ 'imageViewer' ].model; let i = index;" >
        <popup #imageViewer
               [hash]="openAppsInThisPage[ 'imageViewer' ].model[i].hash"
               [title]="openAppsInThisPage[ 'imageViewer' ].model[i].title || 'Image Viewer ' + i "
               [type]="openAppsInThisPage[ 'imageViewer' ].type"
               [firstPopupX]="openAppsInThisPage[ 'imageViewer' ].model[i].x"
               [firstPopupY]="openAppsInThisPage[ 'imageViewer' ].model[i].y"
               [width]="produceHeightAndWidth( openAppsInThisPage[ 'imageViewer' ].model[i].width, '500' )"
               [height]="produceHeightAndWidth( openAppsInThisPage[ 'imageViewer' ].model[i].height, '700')"
               [index] = "openAppsInThisPage[ 'imageViewer' ].model[i].index"
               [arrayLength] = "openAppsInThisPage[ 'imageViewer' ].model[i].arrayLength"
               (sendAppCoordinatesBack)="updateAppCoordinates($event)"
               [queryId] = "openAppsInThisPage[ 'imageViewer' ].model[i].queryId"
               (sendIndexBack)="updateIndices( $event )"
               (sendAppSettingsBack)="updateAppSettings($event)">
          <div [ngStyle]="{'height': produceHeightAndWidth( openAppsInThisPage[ 'imageViewer' ].model[i].height, '700' ) + 'px',
  'width': produceHeightAndWidth( openAppsInThisPage[ 'imageViewer' ].model[i].width, '500' ) + 'px'}">
          <app-image-with-overlay style="position: sticky;"
                                  [iiifImagePath]="openAppsInThisPage[ 'imageViewer' ].model[i][ 'fileValueAsUrl' ]"
                                  [maxImageWidth]="openAppsInThisPage[ 'imageViewer' ].model[i][ 'stillImageFileValueHasDimX' ]"
                                  [maxImageHeight]="openAppsInThisPage[ 'imageViewer' ].model[i][ 'stillImageFileValueHasDimY' ]"
                                  width="500"
                                  height="700">
          </app-image-with-overlay>
          </div>
        </popup>
        <button mat-button [matMenuTriggerFor]="menu" style="vertical-align: bottom;" ><mat-icon>image</mat-icon> {{ i }}</button>
        <mat-menu #menu="matMenu">
          <button mat-menu-item (click)="imageViewer.appear()">Show Image Viewer {{ i }}</button>
          <button mat-menu-item >Choose Image</button>
          <button mat-menu-item (click)=" closeApp( openAppsInThisPage[ 'imageViewer' ].model, i ) ">Remove this app</button>
        </mat-menu>
      </div>

      <!-- Search -->
      <div *ngFor="let search of openAppsInThisPage[ 'searchViewer' ].model; let i = index;" >
        <popup #searchViewer
               [hash]="openAppsInThisPage[ 'searchViewer' ].model[i].hash"
               [title]="openAppsInThisPage[ 'searchViewer' ].model[i].title || 'Search ' + i"
               [type]="openAppsInThisPage[ 'searchViewer' ].type"
               [firstPopupX]="openAppsInThisPage[ 'searchViewer' ].model[i].x"
               [firstPopupY]="openAppsInThisPage[ 'searchViewer' ].model[i].y"
               [width]="produceHeightAndWidth( openAppsInThisPage[ 'searchViewer' ].model[i].width, '250' )"
               [height]="produceHeightAndWidth( openAppsInThisPage[ 'searchViewer' ].model[i].height, '400')"
               (sendAppCoordinatesBack)="updateAppCoordinates($event)"
               (sendAppSettingsBack)="updateAppSettings($event)">
          <div [ngStyle]="{'height': produceHeightAndWidth( openAppsInThisPage[ 'searchViewer' ].model[i].height, '400' ) + 'px',
  'width': produceHeightAndWidth( openAppsInThisPage[ 'searchViewer' ].model[i].width, '250' ) + 'px'}">
          <!--<nie-search-->
            <!--style="position: sticky;">-->

          <!--</nie-search>-->
          </div>
        </popup>
        <button mat-button [matMenuTriggerFor]="menu" style="vertical-align: bottom;" ><mat-icon>search</mat-icon> {{ i }} </button>
        <mat-menu #menu="matMenu">
          <button mat-menu-item (click)="searchViewer.appear()" >Show Search Viewer {{ i }}</button>
          <button mat-menu-item (click)=" closeApp( openAppsInThisPage[ 'searchViewer' ].model, i ) ">Remove this app</button>
        </mat-menu>
      </div>

    <!-- Simple Image App -->
    <div *ngFor="let image of openAppsInThisPage[ 'simpleImageApp' ].model; let i = index;" >
      <popup #simpleImageApp
             [hash]="openAppsInThisPage[ 'simpleImageApp' ].model[i].hash"
             [title]="openAppsInThisPage[ 'simpleImageApp' ].model[i].title || 'Image' + i"
             [type]="openAppsInThisPage[ 'simpleImageApp' ].type"
             [firstPopupX]="openAppsInThisPage[ 'simpleImageApp' ].model[i].x"
             [firstPopupY]="openAppsInThisPage[ 'simpleImageApp' ].model[i].y"
             [width]="produceHeightAndWidth( openAppsInThisPage[ 'simpleImageApp' ].model[i].width, '500' )"
             [height]="produceHeightAndWidth( openAppsInThisPage[ 'simpleImageApp' ].model[i].height, '500')"
             (sendAppCoordinatesBack)="updateAppCoordinates($event)"
             (sendAppSettingsBack)="updateAppSettings($event)">
        <div [ngStyle]="{'height': produceHeightAndWidth( openAppsInThisPage[ 'simpleImageApp' ].model[i].height, '500' ) + 'px',
  'width': produceHeightAndWidth( openAppsInThisPage[ 'simpleImageApp' ].model[i].width, '500' ) + 'px'}">
        <app-simple-image-app
          style="position: sticky;"
          [imageURL]="openAppsInThisPage[ 'simpleImageApp' ].model[i]['imageURL']">

        </app-simple-image-app>
        </div>
      </popup>
      <button mat-button [matMenuTriggerFor]="menu" style="vertical-align: bottom;" ><mat-icon>add_photo_alternate</mat-icon> {{ i }} </button>
      <mat-menu #menu="matMenu">
        <button mat-menu-item (click)="simpleImageApp.appear()" >Show Image Viewer {{ i }}</button>
        <button mat-menu-item (click)=" closeApp( openAppsInThisPage[ 'simpleImageApp' ].model, i ) ">Remove this app</button>
      </mat-menu>
    </div>

      <!-- TextViewer -->
      <div *ngFor="let textViewer of openAppsInThisPage[ 'textViewer' ].model; let i = index;" >
        <popup #textViewer
               [hash]="openAppsInThisPage[ 'textViewer' ].model[i].hash"
               [title]="openAppsInThisPage[ 'textViewer' ].model[i].title || 'Text Viewer ' + i"
               [type]="openAppsInThisPage[ 'textViewer' ].type"
               [firstPopupX]="openAppsInThisPage[ 'textViewer' ].model[i].x"
               [firstPopupY]="openAppsInThisPage[ 'textViewer' ].model[i].y"
               [width]="produceHeightAndWidth( openAppsInThisPage[ 'textViewer' ].model[i].width, '500' )"
               [height]="produceHeightAndWidth( openAppsInThisPage[ 'textViewer' ].model[i].height, '500')"
               (sendAppCoordinatesBack)="updateAppCoordinates($event)"
               (sendAppSettingsBack)="updateAppSettings($event)">
          <div [ngStyle]="{'height': produceHeightAndWidth( openAppsInThisPage[ 'textViewer' ].model[i].height, '500' ) + 'px',
  'width': produceHeightAndWidth( openAppsInThisPage[ 'textViewer' ].model[i].width, '500' ) + 'px'}">
            <app-text-view class="draggable" style="position: sticky;">
            </app-text-view>
          </div>
        </popup>
        <button mat-button [matMenuTriggerFor]="menu" style="vertical-align: bottom;" ><mat-icon>short_text</mat-icon> {{ i }}</button>
        <mat-menu #menu="matMenu">
          <button mat-menu-item (click)="textViewer.appear()" >Show Text Viewer {{ i }}</button>
          <button mat-menu-item (click)=" closeApp( openAppsInThisPage[ 'textViewer' ].model, i ) ">Remove this app</button>
          <button mat-menu-item>Choose Text</button>
        </mat-menu>

      </div>

    <!-- HTML viewer -->
    <div *ngFor="let htmlViewer of openAppsInThisPage[ 'htmlViewer' ].model; let i = index;" >
      <popup #htmlViewer
             [hash]="openAppsInThisPage[ 'htmlViewer' ].model[i].hash"
             [title]="openAppsInThisPage[ 'htmlViewer' ].model[i].title || 'HTML Viewer ' + i"
             [type]="openAppsInThisPage[ 'htmlViewer' ].type"
             [firstPopupX]="openAppsInThisPage[ 'htmlViewer' ].model[i].x"
             [firstPopupY]="openAppsInThisPage[ 'htmlViewer' ].model[i].y"
             [width]="produceHeightAndWidth( openAppsInThisPage[ 'htmlViewer' ].model[i].width, '500' )"
             [height]="produceHeightAndWidth( openAppsInThisPage[ 'htmlViewer' ].model[i].height, '500')"
             (sendAppCoordinatesBack)="updateAppCoordinates($event)"
             (sendAppSettingsBack)="updateAppSettings($event)">
        <div [ngStyle]="{'height': produceHeightAndWidth( openAppsInThisPage[ 'htmlViewer' ].model[i].height, '500' ) + 'px',
  'width': produceHeightAndWidth( openAppsInThisPage[ 'htmlViewer' ].model[i].width, '500' ) + 'px'}">
          <app-html-viewer class="draggable" style="position: sticky;"
                           [htmlContent]="openAppsInThisPage[ 'htmlViewer' ].model[i]['htmlContent']"
                           [selectiveStyleDeclarations]="openAppsInThisPage[ 'htmlViewer' ].model[i]['selectiveStyleDeclarations']"
                           [styleDeclarations]="openAppsInThisPage[ 'htmlViewer' ].model[i]['styleDeclarations']">
          </app-html-viewer>
        </div>
      </popup>
      <button mat-button [matMenuTriggerFor]="menu" style="vertical-align: bottom;" ><mat-icon>short_text</mat-icon> {{ i }}</button>
      <mat-menu #menu="matMenu">
        <button mat-menu-item (click)="htmlViewer.appear()" >Show HTML Viewer {{ i }}</button>
        <button mat-menu-item (click)=" closeApp( openAppsInThisPage[ 'htmlViewer' ].model, i ) ">Remove this app</button>
      </mat-menu>

    </div>

      <!-- Synopsis -->
      <div *ngFor="let synopsisViewer of openAppsInThisPage[ 'synopsisViewer' ].model; let i = index;" >
        <popup #synopsisViewer
               [hash]="openAppsInThisPage[ 'synopsisViewer' ].model[i].hash"
               [title]="openAppsInThisPage[ 'synopsisViewer' ].model[i].title || 'Synopsis Viewer ' + i"
               [type]="openAppsInThisPage[ 'synopsisViewer' ].type"
               [firstPopupX]="openAppsInThisPage[ 'synopsisViewer' ].model[i].x"
               [firstPopupY]="openAppsInThisPage[ 'synopsisViewer' ].model[i].y"
               [width]="produceHeightAndWidth( openAppsInThisPage[ 'synopsisViewer' ].model[i].width, '900' )"
               [height]="produceHeightAndWidth( openAppsInThisPage[ 'synopsisViewer' ].model[i].height, '400')"
               (sendAppCoordinatesBack)="updateAppCoordinates($event)"
               (sendAppSettingsBack)="updateAppSettings($event)">
          <div [ngStyle]="{'height': produceHeightAndWidth( openAppsInThisPage[ 'synopsisViewer' ].model[i].height, '150' ) + 'px',
  'width': produceHeightAndWidth( openAppsInThisPage[ 'synopsisViewer' ].model[i].width, '250' ) + 'px'}">
            <app-synopsis style="position: sticky;">

            </app-synopsis>
          </div>
        </popup>
        <button mat-button [matMenuTriggerFor]="menu" style="vertical-align: bottom;" ><mat-icon>art_track</mat-icon> {{ i }}</button>
        <mat-menu #menu="matMenu">
          <button mat-menu-item (click)="synopsisViewer.appear()" >Show Synopsis Viewer {{ i }}</button><br>
          <button mat-menu-item (click)=" closeApp( openAppsInThisPage[ 'synopsisViewer' ].model, i ) ">Remove this app</button>
        </mat-menu>
      </div>

      <!-- Resource Creation Form -->
      <div *ngFor="let createResourceForm of openAppsInThisPage[ 'createResourceForm' ].model; let i = index;" >
        <popup #createResourceForm
               [hash]="openAppsInThisPage[ 'createResourceForm' ].model[i].hash"
               [title]="openAppsInThisPage[ 'createResourceForm' ].model[i].title ||  'Resource Creation ' + i"
               [type]="openAppsInThisPage[ 'createResourceForm' ].type"
               [firstPopupX]="openAppsInThisPage[ 'createResourceForm' ].model[i].x"
               [firstPopupY]="openAppsInThisPage[ 'createResourceForm' ].model[i].y"
               [width]="produceHeightAndWidth( openAppsInThisPage[ 'createResourceForm' ].model[i].width, '900' )"
               [height]="produceHeightAndWidth( openAppsInThisPage[ 'createResourceForm' ].model[i].height, '400')"
               (sendAppCoordinatesBack)="updateAppCoordinates($event)"
               (sendAppSettingsBack)="updateAppSettings($event)">
          <div [ngStyle]="{'height': produceHeightAndWidth( openAppsInThisPage[ 'createResourceForm' ].model[i].height, '400' ) + 'px',
  'width': produceHeightAndWidth( openAppsInThisPage[ 'createResourceForm' ].model[i].width, '900' ) + 'px'}" >
            <app-create-resource style="position: sticky;"
                                 [projectIRI]="projectIRI"
                                 (resourceIRI)="closeApp( openAppsInThisPage[ 'createResourceForm' ].model, i )">
            </app-create-resource>
          </div>
        </popup>
        <button mat-button [matMenuTriggerFor]="menu" style="vertical-align: bottom;" ><mat-icon>add_to_queue</mat-icon> {{ i }}</button>
        <mat-menu #menu="matMenu">
          <button mat-menu-item (click)="createResourceForm.appear()" >Show Create Resource Form {{ i }}</button>
          <button mat-menu-item (click)=" closeApp( openAppsInThisPage[ 'createResourceForm' ].model, i ) ">Remove this app</button>
        </mat-menu>

      </div>

    <!-- Edit Resource Form -->
    <div *ngFor="let editResourceForm of openAppsInThisPage[ 'editResourceForm' ].model; let i = index;" >
      <popup #editResourceForm
             [hash]="openAppsInThisPage[ 'editResourceForm' ].model[i].hash"
             [title]="openAppsInThisPage[ 'editResourceForm' ].model[i].title ||  'Edit Resource ' + i"
             [type]="openAppsInThisPage[ 'editResourceForm' ].type"
             [firstPopupX]="openAppsInThisPage[ 'editResourceForm' ].model[i].x"
             [firstPopupY]="openAppsInThisPage[ 'editResourceForm' ].model[i].y"
             [width]="produceHeightAndWidth( openAppsInThisPage[ 'editResourceForm' ].model[i].width, '900' )"
             [height]="produceHeightAndWidth( openAppsInThisPage[ 'editResourceForm' ].model[i].height, '400')"
             (sendAppCoordinatesBack)="updateAppCoordinates($event)"
             (sendAppSettingsBack)="updateAppSettings($event)">
        <div [ngStyle]="{'height': produceHeightAndWidth( openAppsInThisPage[ 'editResourceForm' ].model[i].height, '400' ) + 'px',
  'width': produceHeightAndWidth( openAppsInThisPage[ 'editResourceForm' ].model[i].width, '900' ) + 'px'}" >
          <app-resource-form (resourceIsDeleted)="closeApp( openAppsInThisPage[ 'createResourceForm' ].model, i )">
          </app-resource-form>
        </div>
      </popup>
      <button mat-button [matMenuTriggerFor]="menu" style="vertical-align: bottom;" ><mat-icon>add_to_queue</mat-icon> {{ i }}</button>
      <mat-menu #menu="matMenu">
        <button mat-menu-item (click)="editResourceForm.appear()" >Show Create Resource Form {{ i }}</button>
        <button mat-menu-item (click)=" closeApp( openAppsInThisPage[ 'editResourceForm' ].model, i ) ">Remove this app</button>
      </mat-menu>

    </div>


    <!-- textlistViewers -->
      <div *ngFor="let createResourceForm of openAppsInThisPage[ 'textlistViewers' ].model; let i = index;" >
        <popup #textlistViewers
               [hash]="openAppsInThisPage[ 'textlistViewers' ].model[i].hash"
               [title]="openAppsInThisPage[ 'textlistViewers' ].model[i].title || 'Plaintext - Viewer ' + i"
               [type]="openAppsInThisPage[ 'textlistViewers' ].type"
               [firstPopupX]="openAppsInThisPage[ 'textlistViewers' ].model[i].x"
               [firstPopupY]="openAppsInThisPage[ 'textlistViewers' ].model[i].y"
               [width]="produceHeightAndWidth( openAppsInThisPage[ 'textlistViewers' ].model[i].width, '250' )"
               [height]="produceHeightAndWidth( openAppsInThisPage[ 'textlistViewers' ].model[i].height, '150')"
               (sendAppCoordinatesBack)="updateAppCoordinates($event)"
               (sendAppSettingsBack)="updateAppSettings($event)">
          <div [ngStyle]="{'height': produceHeightAndWidth( openAppsInThisPage[ 'textlistViewers' ].model[i].height, '150' ) + 'px',
        'width': produceHeightAndWidth( openAppsInThisPage[ 'textlistViewers' ].model[i].width, '250' ) + 'px'}">
            <app-textlist-viewer style="position: sticky;"
                                 [textToDisplay]="openAppsInThisPage[ 'textlistViewers' ].model[i]['textlist']">
            </app-textlist-viewer>
          </div>
        </popup>
        <button mat-button [matMenuTriggerFor]="menu" style="vertical-align: bottom;" ><mat-icon>short_text</mat-icon> {{ i }}</button>
        <mat-menu #menu="matMenu">
          <button mat-menu-item (click)="textlistViewers.appear()" >Show Textlist Viewer {{ i }}</button>
          <button mat-menu-item (click)=" closeApp( openAppsInThisPage[ 'textlistViewers' ].model, i ) ">Remove this app</button>
        </mat-menu>
      </div>

    <!-- parzivalFassung -->
    <div *ngFor="let parzivalFassung of openAppsInThisPage[ 'parzivalFassung' ].model; let i = index;" >
      <popup #parzivalFassung
             [hash]="openAppsInThisPage[ 'parzivalFassung' ].model[i].hash"
             [title]="openAppsInThisPage[ 'parzivalFassung' ].model[i].title || 'parzivalFassung ' + i"
             [type]="openAppsInThisPage[ 'parzivalFassung' ].type"
             [firstPopupX]="openAppsInThisPage[ 'parzivalFassung' ].model[i].x"
             [firstPopupY]="openAppsInThisPage[ 'parzivalFassung' ].model[i].y"
             [width]="produceHeightAndWidth( openAppsInThisPage[ 'parzivalFassung' ].model[i].width, '350' )"
             [height]="produceHeightAndWidth( openAppsInThisPage[ 'parzivalFassung' ].model[i].height, '500')"
             (sendAppCoordinatesBack)="updateAppCoordinates($event)"
             (sendAppSettingsBack)="updateAppSettings($event)">
        <div [ngStyle]="{'height': produceHeightAndWidth( openAppsInThisPage[ 'parzivalFassung' ].model[i].height, '500' ) + 'px',
        'width': produceHeightAndWidth( openAppsInThisPage[ 'parzivalFassung' ].model[i].width, '350' ) + 'px'}">
          <app-parzival-fassung style="position: sticky;"
                                [textJson]="openAppsInThisPage[ 'parzivalFassung' ].model[i]['textJson']">
          </app-parzival-fassung>
        </div>
      </popup>
      <button mat-button [matMenuTriggerFor]="menu" style="vertical-align: bottom;" >pF {{ i }}</button>
      <mat-menu #menu="matMenu">
        <button mat-menu-item (click)="parzivalFassung.appear()" >Show Textlist Viewer {{ i }}</button>
        <button mat-menu-item (click)=" closeApp( openAppsInThisPage[ 'parzivalFassung' ].model, i ) ">Remove this app</button>
      </mat-menu>
    </div>

    <!-- avp-Edition -->
    <div *ngFor="let avpEditionView of openAppsInThisPage[ 'avpEditionView' ].model; let i = index;" >
      <popup #avpEditionView
             [hash]="openAppsInThisPage[ 'avpEditionView' ].model[i].hash"
             [title]="openAppsInThisPage[ 'avpEditionView' ].model[i].title || 'avpEditionView ' + i"
             [type]="openAppsInThisPage[ 'avpEditionView' ].type"
             [firstPopupX]="openAppsInThisPage[ 'avpEditionView' ].model[i].x"
             [firstPopupY]="openAppsInThisPage[ 'avpEditionView' ].model[i].y"
             [width]="produceHeightAndWidth( openAppsInThisPage[ 'avpEditionView' ].model[i].width, '350' )"
             [height]="produceHeightAndWidth( openAppsInThisPage[ 'avpEditionView' ].model[i].height, '500')"
             (sendAppCoordinatesBack)="updateAppCoordinates($event)"
             (sendAppSettingsBack)="updateAppSettings($event)">
        <div [ngStyle]="{'height': produceHeightAndWidth( openAppsInThisPage[ 'avpEditionView' ].model[i].height, '500' ) + 'px',
        'width': produceHeightAndWidth( openAppsInThisPage[ 'avpEditionView' ].model[i].width, '350' ) + 'px'}">
          <app-p0041-edition style="position: sticky;"
                             [backendAddress]="openAppsInThisPage[ 'avpEditionView' ].model[i][ 'backendAddress' ]">
          </app-p0041-edition>
        </div>
      </popup>
      <button mat-button [matMenuTriggerFor]="menu" style="vertical-align: bottom;" >avpE {{ i }}</button>
      <mat-menu #menu="matMenu">
        <button mat-menu-item (click)="avpEditionView.appear()" >Show AVP Edition Viewer {{ i }}</button>
        <button mat-menu-item (click)=" closeApp( openAppsInThisPage[ 'avpEditionView' ].model, i ) ">Remove this app</button>
      </mat-menu>
    </div>

    <!-- svg-Transcription -->
    <div *ngFor="let svgTranscription of openAppsInThisPage[ 'svgTranscription' ].model; let i = index;" >
      <popup #svgTranscription
             [hash]="openAppsInThisPage[ 'svgTranscription' ].model[i].hash"
             [title]="openAppsInThisPage[ 'svgTranscription' ].model[i].title || 'svgTranscription ' + i"
             [type]="openAppsInThisPage[ 'svgTranscription' ].type"
             [firstPopupX]="openAppsInThisPage[ 'svgTranscription' ].model[i].x"
             [firstPopupY]="openAppsInThisPage[ 'svgTranscription' ].model[i].y"
             [width]="produceHeightAndWidth( openAppsInThisPage[ 'svgTranscription' ].model[i].width, '350' )"
             [height]="produceHeightAndWidth( openAppsInThisPage[ 'svgTranscription' ].model[i].height, '500')"
             (sendAppCoordinatesBack)="updateAppCoordinates($event)"
             (sendAppSettingsBack)="updateAppSettings($event)">
        <div [ngStyle]="{'height': produceHeightAndWidth( openAppsInThisPage[ 'svgTranscription' ].model[i].height, '500' ) + 'px',
        'width': produceHeightAndWidth( openAppsInThisPage[ 'svgTranscription' ].model[i].width, '350' ) + 'px'}">
          <app-text-svg-view-wrapper style="position: sticky;"
                                         [pageTree]="openAppsInThisPage['svgTranscription'].model[i]['pageTree']"
                                         [imageUrl]="openAppsInThisPage['svgTranscription'].model[i]['imageUrl']"
                                         [width]="openAppsInThisPage['svgTranscription'].model[i]['imageWidth']"
                                         [height]="openAppsInThisPage['svgTranscription'].model[i]['imageHeight']" >
          </app-text-svg-view-wrapper>
        </div>
      </popup>
      <button mat-button [matMenuTriggerFor]="menu" style="vertical-align: bottom;" >svg {{ i }}</button>
      <mat-menu #menu="matMenu">
        <button mat-menu-item (click)="svgTranscription.appear()" >Show AVP Edition Viewer {{ i }}</button>
        <button mat-menu-item (click)=" closeApp( openAppsInThisPage[ 'svgTranscription' ].model, i ) ">Remove this app</button>
      </mat-menu>
    </div>

    <!-- jsonViewer -->
    <div *ngFor="let jsonViewer of openAppsInThisPage[ 'jsonViewer' ].model; let i = index;" >
      <popup #jsonViewer
             [hash]="openAppsInThisPage[ 'jsonViewer' ].model[i].hash"
             [title]="openAppsInThisPage[ 'jsonViewer' ].model[i].title || 'Textlist - Viewer ' + i"
             [type]="openAppsInThisPage[ 'jsonViewer' ].type"
             [firstPopupX]="openAppsInThisPage[ 'jsonViewer' ].model[i].x"
             [firstPopupY]="openAppsInThisPage[ 'jsonViewer' ].model[i].y"
             [width]="produceHeightAndWidth( openAppsInThisPage[ 'jsonViewer' ].model[i].width, '500' )"
             [height]="produceHeightAndWidth( openAppsInThisPage[ 'jsonViewer' ].model[i].height, '500')"
             (sendAppCoordinatesBack)="updateAppCoordinates($event)"
             (sendAppSettingsBack)="updateAppSettings($event)">
        <div [ngStyle]="{'height': produceHeightAndWidth( openAppsInThisPage[ 'jsonViewer' ].model[i].height, '500' ) + 'px',
        'width': produceHeightAndWidth( openAppsInThisPage[ 'jsonViewer' ].model[i].width, '500' ) + 'px'}">
          <response-tree style="position: sticky;"
                               [queryResponse]="openAppsInThisPage[ 'jsonViewer' ].model[i]['json']">
          </response-tree>
        </div>
      </popup>
      <button mat-button [matMenuTriggerFor]="menu" style="vertical-align: bottom;" ><mat-icon>spa</mat-icon> {{ i }}</button>
      <mat-menu #menu="matMenu">
        <button mat-menu-item (click)="jsonViewer.appear()" >Show Json Viewer {{ i }}</button>
        <button mat-menu-item (click)=" closeApp( openAppsInThisPage[ 'jsonViewer' ].model, i ) ">Remove this app</button>
      </mat-menu>
    </div>

    <!-- Tree navigation -->
    <div *ngFor="let treeNavigation of openAppsInThisPage[ 'treeNavigation' ].model; let i = index;" >
      <popup #treeNavigation
             [hash]="openAppsInThisPage[ 'treeNavigation' ].model[i].hash"
             [title]="openAppsInThisPage[ 'treeNavigation' ].model[i].title ||  'Tree navigation ' + i"
             [type]="openAppsInThisPage[ 'treeNavigation' ].type"
             [firstPopupX]="openAppsInThisPage[ 'treeNavigation' ].model[i].x"
             [firstPopupY]="openAppsInThisPage[ 'treeNavigation' ].model[i].y"
             [width]="produceHeightAndWidth( openAppsInThisPage[ 'treeNavigation' ].model[i].width, '400' )"
             [height]="produceHeightAndWidth( openAppsInThisPage[ 'treeNavigation' ].model[i].height, '600')"
             (sendAppCoordinatesBack)="updateAppCoordinates($event)"
             (sendAppSettingsBack)="updateAppSettings($event)">
        <div [ngStyle]="{'height': produceHeightAndWidth( openAppsInThisPage[ 'treeNavigation' ].model[i].height, '600' ) + 'px',
  'width': produceHeightAndWidth( openAppsInThisPage[ 'treeNavigation' ].model[i].width, '400' ) + 'px'}" >
          <app-navigation-tree [queryResponse]="openAppsInThisPage[ 'treeNavigation' ].model[i]['json']">
          </app-navigation-tree>
        </div>
      </popup>
      <button mat-button [matMenuTriggerFor]="menu" style="vertical-align: bottom;" ><mat-icon>add_to_queue</mat-icon> {{ i }}</button>
      <mat-menu #menu="matMenu">
        <button mat-menu-item (click)="treeNavigation.appear()" >Show Tree Navigation {{ i }}</button>
        <button mat-menu-item (click)=" closeApp( openAppsInThisPage[ 'treeNavigation' ].model, i ) ">Remove this app</button>
      </mat-menu>

    </div>

    <!-- Result list -->
    <div *ngFor="let dataListView of openAppsInThisPage[ 'dataListView' ].model; let i = index;" >
      <popup #dataListView
             [hash]="openAppsInThisPage[ 'dataListView' ].model[i].hash"
             [title]="openAppsInThisPage[ 'dataListView' ].model[i].title || 'Data list viewer' + i"
             [type]="openAppsInThisPage[ 'dataListView' ].type"
             [firstPopupX]="openAppsInThisPage[ 'dataListView' ].model[i].x"
             [firstPopupY]="openAppsInThisPage[ 'dataListView' ].model[i].y"
             [width]="produceHeightAndWidth( openAppsInThisPage[ 'dataListView' ].model[i].width, '700' )"
             [height]="produceHeightAndWidth( openAppsInThisPage[ 'dataListView' ].model[i].height, '500')"
             (sendAppCoordinatesBack)="updateAppCoordinates($event)"
             (sendAppSettingsBack)="updateAppSettings($event)">
        <div [ngStyle]="{'height': produceHeightAndWidth( openAppsInThisPage[ 'dataListView' ].model[i].height, '500' ) + 'px',
        'width': produceHeightAndWidth( openAppsInThisPage[ 'dataListView' ].model[i].width, '700' ) + 'px'}">
          <data-list-view style="position: sticky;"
                         [queryResponse]="openAppsInThisPage[ 'dataListView' ].model[i]['json']"
                          [dataListSettings]="openAppsInThisPage[ 'dataListView' ].model[i]['settings']">
          </data-list-view>
        </div>
      </popup>
      <button mat-button [matMenuTriggerFor]="menu" style="vertical-align: bottom;" ><mat-icon>spa</mat-icon> {{ i }}</button>
      <mat-menu #menu="matMenu">
        <button mat-menu-item (click)="dataListView.appear()" >Show Data list Viewer {{ i }}</button>
        <button mat-menu-item (click)=" closeApp( openAppsInThisPage[ 'dataListView' ].model, i ) ">Remove this app</button>
      </mat-menu>
    </div>
      <!-- Bar Charts -->
      <div *ngFor="let barChart of openAppsInThisPage[ 'barCharts' ].model; let i = index;" >
        <popup #barChart
               [hash]="openAppsInThisPage[ 'barCharts' ].model[i].hash"
               [title]="openAppsInThisPage[ 'barCharts' ].model[i].title || 'Bar Chart ' + i"
               [type]="openAppsInThisPage[ 'barCharts' ].type"
               [firstPopupX]="openAppsInThisPage[ 'barCharts' ].model[i].x"
               [firstPopupY]="openAppsInThisPage[ 'barCharts' ].model[i].y"
               [width]="produceHeightAndWidth( openAppsInThisPage[ 'barCharts' ].model[i].width, '1200' )"
               [height]="produceHeightAndWidth( openAppsInThisPage[ 'barCharts' ].model[i].height, '500')"
               (sendAppCoordinatesBack)="updateAppCoordinates($event)"
               (sendAppSettingsBack)="updateAppSettings($event)">
          <div [ngStyle]="{'height': produceHeightAndWidth( openAppsInThisPage[ 'barCharts' ].model[i].height, '500' ) + 'px',
  'width': produceHeightAndWidth( openAppsInThisPage[ 'barCharts' ].model[i].width, '1200' ) + 'px'}">
            <app-bar-chart
              [initialised] = "openAppsInThisPage[ 'barCharts' ].model[i].initialized"
              [numberOfInitialisedComponent] = " i " >

            </app-bar-chart>
          </div>
        </popup>
        <button mat-button [matMenuTriggerFor]="menu" style="vertical-align: bottom;" ><mat-icon>bar_chart</mat-icon> {{ i }}</button>
        <mat-menu #menu="matMenu">
          <button mat-menu-item (click)="barChart.appear()" (click)="openAppsInThisPage[ 'barCharts' ].model[i].initialized = true">Show Bar Chart {{ i }}</button>
          <button mat-menu-item (click)=" closeApp( openAppsInThisPage[ 'barCharts' ].model, i ) ">Remove this app</button>
        </mat-menu>
      </div>

    <!-- Spiral Bar Charts -->
    <div *ngFor="let barChart of openAppsInThisPage[ 'spiralBarCharts' ].model; let i = index;" >
      <popup #spiralBarCharts
             [hash]="openAppsInThisPage[ 'spiralBarCharts' ].model[i].hash"
             [title]="openAppsInThisPage[ 'spiralBarCharts' ].model[i].title || 'Spiral Bar Chart ' + i"
             [type]="openAppsInThisPage[ 'spiralBarCharts' ].type"
             [firstPopupX]="openAppsInThisPage[ 'spiralBarCharts' ].model[i].x"
             [firstPopupY]="openAppsInThisPage[ 'spiralBarCharts' ].model[i].y"
             [width]="produceHeightAndWidth( openAppsInThisPage[ 'spiralBarCharts' ].model[i].width, '500' )"
             [height]="produceHeightAndWidth( openAppsInThisPage[ 'spiralBarCharts' ].model[i].height, '500')"
             (sendAppCoordinatesBack)="updateAppCoordinates($event)"
             (sendAppSettingsBack)="updateAppSettings($event)">
        <div [ngStyle]="{'height': produceHeightAndWidth( openAppsInThisPage[ 'spiralBarCharts' ].model[i].height, '500' ) + 'px',
  'width': produceHeightAndWidth( openAppsInThisPage[ 'spiralBarCharts' ].model[i].width, '500' ) + 'px'}">
          <app-spiral-bar-chart
            [initialised] = "openAppsInThisPage[ 'spiralBarCharts' ].model[i].initialized"
            [numberOfInitialisedComponent] = " i " >

          </app-spiral-bar-chart>
        </div>
      </popup>
      <button mat-button [matMenuTriggerFor]="menu" style="vertical-align: bottom;" ><mat-icon>bar_chart</mat-icon> {{ i }}</button>
      <mat-menu #menu="matMenu">
        <button mat-menu-item (click)="spiralBarCharts.appear()" (click)="openAppsInThisPage[ 'spiralBarCharts' ].model[i].initialized = true">Show Spiral Bar Chart {{ i }}</button>
        <button mat-menu-item (click)=" closeApp( openAppsInThisPage[ 'spiralBarCharts' ].model, i ) ">Remove this app</button>
      </mat-menu>
    </div>


      <!-- Line Charts -->
      <div *ngFor="let lineChart of openAppsInThisPage[ 'lineCharts' ].model; let i = index;" >
        <popup #lineChart
               [hash]="openAppsInThisPage[ 'lineCharts' ].model[i].hash"
               [title]="openAppsInThisPage[ 'lineCharts' ].model[i].title || 'Line Chart ' + i"
               [type]="openAppsInThisPage[ 'lineCharts' ].type"
               [firstPopupX]="openAppsInThisPage[ 'lineCharts' ].model[i].x"
               [firstPopupY]="openAppsInThisPage[ 'lineCharts' ].model[i].y"
               [width]="produceHeightAndWidth( openAppsInThisPage[ 'lineCharts' ].model[i].width, '600' )"
               [height]="produceHeightAndWidth( openAppsInThisPage[ 'lineCharts' ].model[i].height, '400')"
               (sendAppCoordinatesBack)="updateAppCoordinates($event)"
               (sendAppSettingsBack)="updateAppSettings($event)">
          <div [ngStyle]="{'height': produceHeightAndWidth( openAppsInThisPage[ 'lineCharts' ].model[i].height, '400' ) + 'px',
  'width': produceHeightAndWidth( openAppsInThisPage[ 'lineCharts' ].model[i].width, '600' ) + 'px'}">
            <app-multi-line-chart
              [initialised] = "openAppsInThisPage[ 'lineCharts' ].model[i].initialized"
              [numberOfInitialisedComponent] = " i " >

            </app-multi-line-chart>
          </div>
        </popup>
        <button mat-button [matMenuTriggerFor]="menu" style="vertical-align: bottom;" ><mat-icon>show_chart</mat-icon> {{ i }}</button>
        <mat-menu #menu="matMenu">
          <button mat-menu-item (click)="lineChart.appear()" (click)="openAppsInThisPage[ 'lineCharts' ].model[i].initialized = true">Show Line Chart {{ i }}</button>
          <button mat-menu-item (click)=" closeApp( openAppsInThisPage[ 'lineCharts' ].model, i ) ">Remove this app</button>
        </mat-menu>
      </div>

      <!-- Brush Zoom Charts -->
      <div *ngFor="let brushZoomChart of openAppsInThisPage[ 'brushZoomCharts' ].model; let i = index;" >
        <popup #brushZoomChart
               [hash]="openAppsInThisPage[ 'brushZoomCharts' ].model[i].hash"
               [title]="openAppsInThisPage[ 'brushZoomCharts' ].model[i].title || 'Brush Zoom Chart ' + i"
               [type]="openAppsInThisPage[ 'brushZoomCharts' ].type"
               [firstPopupX]="openAppsInThisPage[ 'brushZoomCharts' ].model[i].x"
               [firstPopupY]="openAppsInThisPage[ 'brushZoomCharts' ].model[i].y"
               [width]="produceHeightAndWidth( openAppsInThisPage[ 'brushZoomCharts' ].model[i].width, '900' )"
               [height]="produceHeightAndWidth( openAppsInThisPage[ 'brushZoomCharts' ].model[i].height, '500')"
               (sendAppCoordinatesBack)="updateAppCoordinates($event)"
               (sendAppSettingsBack)="updateAppSettings($event)">
          <div [ngStyle]="{'height': produceHeightAndWidth( openAppsInThisPage[ 'brushZoomCharts' ].model[i].height, '500' ) + 'px',
  'width': produceHeightAndWidth( openAppsInThisPage[ 'brushZoomCharts' ].model[i].width, '900' ) + 'px'}">
            <app-brush-and-zoom
              [initialised] = "openAppsInThisPage[ 'brushZoomCharts' ].model[i].initialized"
              [numberOfInitialisedComponent] = " i " >

            </app-brush-and-zoom>
          </div>
        </popup>
        <button mat-button [matMenuTriggerFor]="menu" style="vertical-align: bottom;" ><mat-icon>insert_chart_outlined</mat-icon> {{ i }}</button>
        <mat-menu #menu="matMenu">
          <button mat-menu-item (click)="brushZoomChart.appear()" (click)="openAppsInThisPage[ 'brushZoomCharts' ].model[i].initialized = true">Show Brush Zoom Chart {{ i }}</button>
          <button mat-menu-item (click)=" closeApp( openAppsInThisPage[ 'brushZoomCharts' ].model, i ) ">Remove this app</button>
        </mat-menu>

      </div>

      <!-- Leaflet Map -->
      <div *ngFor="let leafletMap of openAppsInThisPage[ 'leafletMaps' ].model; let i = index;" >
        <popup #leafletMap
               [hash]="openAppsInThisPage[ 'leafletMaps' ].model[i].hash"
               [title]="openAppsInThisPage[ 'leafletMaps' ].model[i].title ||  'Leaflet Map ' + i"
               [type]="openAppsInThisPage[ 'leafletMaps' ].type"
               [firstPopupX]="openAppsInThisPage[ 'leafletMaps' ].model[i].x"
               [firstPopupY]="openAppsInThisPage[ 'leafletMaps' ].model[i].y"
               [width]="produceHeightAndWidth( openAppsInThisPage[ 'leafletMaps' ].model[i].width, '500' )"
               [height]="produceHeightAndWidth( openAppsInThisPage[ 'leafletMaps' ].model[i].height, '500')"
               (sendAppCoordinatesBack)="updateAppCoordinates($event)"
               (sendAppSettingsBack)="updateAppSettings($event)">
          <div [ngStyle]="{'height': produceHeightAndWidth( openAppsInThisPage[ 'leafletMaps' ].model[i].height, '500' ) + 'px',
  'width': produceHeightAndWidth( openAppsInThisPage[ 'leafletMaps' ].model[i].width, '500' ) + 'px'}">
            <app-leaflet-example
              [initialised] = "openAppsInThisPage[ 'leafletMaps' ].model[i].initialized"
              [numberOfInitialisedComponent] = " i " >

            </app-leaflet-example>
          </div>
        </popup>
        <button mat-button [matMenuTriggerFor]="menu" style="vertical-align: bottom;" ><mat-icon>add_location</mat-icon> {{ i }}</button>
        <mat-menu #menu="matMenu">
          <button mat-menu-item (click)="leafletMap.appear()" (click)="openAppsInThisPage[ 'leafletMaps' ].model[i].initialized = true">Show Leaflet Map {{ i }}</button>
          <button mat-menu-item (click)=" closeApp( openAppsInThisPage[ 'leafletMaps' ].model, i ) ">Remove this app</button>
        </mat-menu>

      </div>

      <!-- Pie Chart -->
      <div *ngFor="let pieChart of openAppsInThisPage[ 'pieCharts' ].model; let i = index;" >
        <popup #pieChart
               [hash]="openAppsInThisPage[ 'pieCharts' ].model[i].hash"
               [title]="openAppsInThisPage[ 'pieCharts' ].model[i].title || 'Pie Chart ' + i"
               [type]="openAppsInThisPage[ 'pieCharts' ].type"
               [firstPopupX]="openAppsInThisPage[ 'pieCharts' ].model[i].x"
               [firstPopupY]="openAppsInThisPage[ 'pieCharts' ].model[i].y"
               [width]="produceHeightAndWidth( openAppsInThisPage[ 'pieCharts' ].model[i].width, '700' )"
               [height]="produceHeightAndWidth( openAppsInThisPage[ 'pieCharts' ].model[i].height, '500')"
               (sendAppCoordinatesBack)="updateAppCoordinates($event)"
               (sendAppSettingsBack)="updateAppSettings($event)">
          <div [ngStyle]="{'height': produceHeightAndWidth( openAppsInThisPage[ 'pieCharts' ].model[i].height, '500' ) + 'px',
  'width': produceHeightAndWidth( openAppsInThisPage[ 'pieCharts' ].model[i].width, '700' ) + 'px'}">
            <app-pie-chart
              [initialised] = "openAppsInThisPage[ 'pieCharts' ].model[i].initialized"
              [numberOfInitialisedComponent] = " i " >
            </app-pie-chart>
          </div>
        </popup>
        <button mat-button [matMenuTriggerFor]="menu" style="vertical-align: bottom;" ><mat-icon>pie_chart</mat-icon> {{ i }}</button>
        <mat-menu #menu="matMenu">
          <button mat-menu-item (click)="pieChart.appear()" (click)="openAppsInThisPage[ 'pieCharts' ].model[i].initialized = true">Show Pie Chart {{ i }}</button>
          <button mat-menu-item (click)=" closeApp( openAppsInThisPage[ 'pieCharts' ].model, i ) ">Remove this app</button>
        </mat-menu>

      </div>

      <!-- Radial Bar Chart -->
      <div *ngFor="let radialBarChart of openAppsInThisPage[ 'radialBarCharts' ].model; let i = index;" >
        <popup #radialBarChart
               [hash]="openAppsInThisPage[ 'radialBarCharts' ].model[i].hash"
               [title]="openAppsInThisPage[ 'radialBarCharts' ].model[i].title || 'Radial Bar Chart ' + i"
               [type]="openAppsInThisPage[ 'radialBarCharts' ].type"
               [firstPopupX]="openAppsInThisPage[ 'radialBarCharts' ].model[i].x"
               [firstPopupY]="openAppsInThisPage[ 'radialBarCharts' ].model[i].y"
               [width]="produceHeightAndWidth( openAppsInThisPage[ 'radialBarCharts' ].model[i].width, '500' )"
               [height]="produceHeightAndWidth( openAppsInThisPage[ 'radialBarCharts' ].model[i].height, '500')"
               (sendAppCoordinatesBack)="updateAppCoordinates($event)"
               (sendAppSettingsBack)="updateAppSettings($event)">
          <div [ngStyle]="{'height': produceHeightAndWidth( openAppsInThisPage[ 'radialBarCharts' ].model[i].height, '500' ) + 'px',
  'width': produceHeightAndWidth( openAppsInThisPage[ 'radialBarCharts' ].model[i].width, '500' ) + 'px'}">
            <app-radial-barchart
              [initialised] = "openAppsInThisPage[ 'radialBarCharts' ].model[i].initialized"
              [numberOfInitialisedComponent] = " i " >
            </app-radial-barchart>
          </div>
        </popup>
        <button mat-button [matMenuTriggerFor]="menu" style="vertical-align: bottom;" ><mat-icon>multiline_chart</mat-icon> {{ i }}</button>
        <mat-menu #menu="matMenu">
          <button mat-menu-item (click)="radialBarChart.appear()" (click)="openAppsInThisPage[ 'radialBarCharts' ].model[i].initialized = true">Show Radial Bar Chart {{ i }}</button>
          <button mat-menu-item (click)=" closeApp( openAppsInThisPage[ 'radialBarCharts' ].model, i ) ">Remove this app</button>
        </mat-menu>

      </div>

      <!-- Sankey Chart -->
      <div *ngFor="let sankeyChart of openAppsInThisPage[ 'sankeyCharts' ].model; let i = index;" >
        <popup #sankeyChart
               [hash]="openAppsInThisPage[ 'sankeyCharts' ].model[i].title || openAppsInThisPage[ 'sankeyCharts' ].model[i].hash"
               [title]="'Sankey Chart ' + i"
               [type]="openAppsInThisPage[ 'sankeyCharts' ].type"
               [firstPopupX]="openAppsInThisPage[ 'sankeyCharts' ].model[i].x"
               [firstPopupY]="openAppsInThisPage[ 'sankeyCharts' ].model[i].y"
               [width]="produceHeightAndWidth( openAppsInThisPage[ 'sankeyCharts' ].model[i].width, '900' )"
               [height]="produceHeightAndWidth( openAppsInThisPage[ 'sankeyCharts' ].model[i].height, '150')"
               (sendAppCoordinatesBack)="updateAppCoordinates($event)"
               (sendAppSettingsBack)="updateAppSettings($event)">
          <div [ngStyle]="{'height': produceHeightAndWidth( openAppsInThisPage[ 'sankeyCharts' ].model[i].height, '500' ) + 'px',
  'width': produceHeightAndWidth( openAppsInThisPage[ 'sankeyCharts' ].model[i].width, '900' ) + 'px'}">
            <app-sankey
              [initialised] = "openAppsInThisPage[ 'sankeyCharts' ].model[i].initialized"
              [numberOfInitialisedComponent] = " i " >
            </app-sankey>
          </div>
        </popup>
        <button mat-button [matMenuTriggerFor]="menu" style="vertical-align: bottom;" ><mat-icon>linear_scale</mat-icon> {{ i }}</button>
        <mat-menu #menu="matMenu">
          <button mat-menu-item (click)="sankeyChart.appear()" (click)="openAppsInThisPage[ 'sankeyCharts' ].model[i].initialized = true">Sankey Chart {{ i }}</button>
          <button mat-menu-item (click)=" closeApp( openAppsInThisPage[ 'sankeyCharts' ].model, i ) ">Remove this app</button>
        </mat-menu>

      </div>

      <!-- Stacked Bar Chart -->
      <div *ngFor="let stackedBarChart of openAppsInThisPage[ 'stackedBarCharts' ].model; let i = index;" >
        <popup #stackedBarChart
               [hash]="openAppsInThisPage[ 'stackedBarCharts' ].model[i].hash"
               [title]="openAppsInThisPage[ 'stackedBarCharts' ].model[i].title ||  'Sankey Chart ' + i"
               [type]="openAppsInThisPage[ 'stackedBarCharts' ].type"
               [firstPopupX]="openAppsInThisPage[ 'stackedBarCharts' ].model[i].x"
               [firstPopupY]="openAppsInThisPage[ 'stackedBarCharts' ].model[i].y"
               [width]="produceHeightAndWidth( openAppsInThisPage[ 'stackedBarCharts' ].model[i].width, '800' )"
               [height]="produceHeightAndWidth( openAppsInThisPage[ 'stackedBarCharts' ].model[i].height, '500')"
               (sendAppCoordinatesBack)="updateAppCoordinates($event)"
               (sendAppSettingsBack)="updateAppSettings($event)">
          <div [ngStyle]="{'height': produceHeightAndWidth( openAppsInThisPage[ 'stackedBarCharts' ].model[i].height, '500' ) + 'px',
  'width': produceHeightAndWidth( openAppsInThisPage[ 'stackedBarCharts' ].model[i].width, '800' ) + 'px'}">
            <app-stacked-bar-chart
              [initialised] = "openAppsInThisPage[ 'stackedBarCharts' ].model[i].initialized"
              [numberOfInitialisedComponent] = " i " >
            </app-stacked-bar-chart>
          </div>
        </popup>
        <button mat-button [matMenuTriggerFor]="menu" style="vertical-align: bottom;" ><mat-icon>view_list</mat-icon> {{ i }}</button>
        <mat-menu #menu="matMenu">
          <button mat-menu-item (click)="stackedBarChart.appear()" (click)="openAppsInThisPage[ 'stackedBarCharts' ].model[i].initialized = true">Stacked Bar Chart {{ i }}</button>
          <button mat-menu-item (click)=" closeApp( openAppsInThisPage[ 'stackedBarCharts' ].model, i ) ">Remove this app</button>
        </mat-menu>

      </div>

      <!-- Chord diagram -->
      <div *ngFor="let chordDiagram of openAppsInThisPage[ 'chordDiagrams' ].model; let i = index;" >
        <popup #chordDiagram
               [hash]="openAppsInThisPage[ 'chordDiagrams' ].model[i].hash"
               [title]="openAppsInThisPage[ 'chordDiagrams' ].model[i].title || 'Chord Diagram ' + i"
               [type]="openAppsInThisPage[ 'chordDiagrams' ].type"
               [firstPopupX]="openAppsInThisPage[ 'chordDiagrams' ].model[i].x"
               [firstPopupY]="openAppsInThisPage[ 'chordDiagrams' ].model[i].y"
               [width]="produceHeightAndWidth( openAppsInThisPage[ 'chordDiagrams' ].model[i].width, '600' )"
               [height]="produceHeightAndWidth( openAppsInThisPage[ 'chordDiagrams' ].model[i].height, '500')"
               (sendAppCoordinatesBack)="updateAppCoordinates($event)"
               (sendAppSettingsBack)="updateAppSettings($event)">
          <div [ngStyle]="{'height': produceHeightAndWidth( openAppsInThisPage[ 'chordDiagrams' ].model[i].height, '500' ) + 'px',
  'width': produceHeightAndWidth( openAppsInThisPage[ 'chordDiagrams' ].model[i].width, '600' ) + 'px'}">
            <app-chord-diagram
              [initialised] = "openAppsInThisPage[ 'chordDiagrams' ].model[i].initialized"
              [numberOfInitialisedComponent] = " i " >
            </app-chord-diagram>
          </div>
        </popup>
        <button mat-button [matMenuTriggerFor]="menu" style="vertical-align: bottom;" ><mat-icon>all_out</mat-icon> {{ i }}</button>
        <mat-menu #menu="matMenu">
          <button mat-menu-item (click)="chordDiagram.appear()" (click)="openAppsInThisPage[ 'chordDiagrams' ].model[i].initialized = true">Chord Diagram {{ i }}</button>
          <button mat-menu-item (click)=" closeApp( openAppsInThisPage[ 'chordDiagrams' ].model, i ) ">Close this app</button>
        </mat-menu>

      </div>
<!--    </div>-->
  </mat-drawer-container>
